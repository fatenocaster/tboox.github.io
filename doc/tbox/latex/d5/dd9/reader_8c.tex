\hypertarget{reader_8c}{\section{src/xml/reader.c File Reference}
\label{d5/dd9/reader_8c}\index{src/xml/reader.\-c@{src/xml/reader.\-c}}
}
{\ttfamily \#include \char`\"{}reader.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../charset/charset.\-h\char`\"{}}\\*
Include dependency graph for reader.\-c\-:
% FIG 0
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{reader_8c_a811e2d1d49136f0cf7c1897677881fcf}{\#define {\bfseries T\-B\-\_\-\-X\-M\-L\-\_\-\-R\-E\-A\-D\-E\-R\-\_\-\-A\-T\-T\-R\-I\-B\-U\-T\-E\-S\-\_\-\-M\-A\-X\-N}~(128)}\label{d5/dd9/reader_8c_a811e2d1d49136f0cf7c1897677881fcf}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
tb\-\_\-handle\-\_\-t \hyperlink{reader_8c_a97c7abbb1be9bae8be2e3d5df7311486}{tb\-\_\-xml\-\_\-reader\-\_\-init} (\hyperlink{structtb__gstream__t}{tb\-\_\-gstream\-\_\-t} $\ast$gst)
\item 
tb\-\_\-void\-\_\-t \hyperlink{reader_8c_a805b1348ac7e5acd52c257ab6901fe26}{tb\-\_\-xml\-\_\-reader\-\_\-exit} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-void\-\_\-t \hyperlink{reader_8c_a5fa80abcaa3bb9868d16e59b4ff2cba6}{tb\-\_\-xml\-\_\-reader\-\_\-clear} (tb\-\_\-handle\-\_\-t reader)
\item 
\hyperlink{structtb__gstream__t}{tb\-\_\-gstream\-\_\-t} $\ast$ \hyperlink{reader_8c_ab2bd29f39f1086dc3ce2efa5af4a5aa4}{tb\-\_\-xml\-\_\-reader\-\_\-stream} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-size\-\_\-t \hyperlink{reader_8c_a57b67fb2b664c74da8fd170249e97853}{tb\-\_\-xml\-\_\-reader\-\_\-level} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-size\-\_\-t \hyperlink{reader_8c_a416870362f120fdfdbea3dfcd1c21437}{tb\-\_\-xml\-\_\-reader\-\_\-next} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-bool\-\_\-t \hyperlink{reader_8c_a8b2a9e616b42b2c968d2a2f6438611a6}{tb\-\_\-xml\-\_\-reader\-\_\-goto} (tb\-\_\-handle\-\_\-t reader, tb\-\_\-char\-\_\-t const $\ast$path)
\item 
\hyperlink{structtb__xml__node__t}{tb\-\_\-xml\-\_\-node\-\_\-t} $\ast$ \hyperlink{reader_8c_a4805eec28d557c50984124faf7330ea9}{tb\-\_\-xml\-\_\-reader\-\_\-load} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-char\-\_\-t const $\ast$ \hyperlink{reader_8c_a85477831abfe7a0b10f73f1c0cbfecc5}{tb\-\_\-xml\-\_\-reader\-\_\-version} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-char\-\_\-t const $\ast$ \hyperlink{reader_8c_ad68775331a7038f2821d8652208aac5e}{tb\-\_\-xml\-\_\-reader\-\_\-charset} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-char\-\_\-t const $\ast$ \hyperlink{reader_8c_a1b9d0042bd67a130a85f1aa00437b5b2}{tb\-\_\-xml\-\_\-reader\-\_\-comment} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-char\-\_\-t const $\ast$ \hyperlink{reader_8c_a4b39debde22a7979300f9e87620de567}{tb\-\_\-xml\-\_\-reader\-\_\-cdata} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-char\-\_\-t const $\ast$ \hyperlink{reader_8c_a6b1e8e60c214c924132dc68ec88b4dec}{tb\-\_\-xml\-\_\-reader\-\_\-text} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-char\-\_\-t const $\ast$ \hyperlink{reader_8c_a635184d02d840becb6e7576e32f572ea}{tb\-\_\-xml\-\_\-reader\-\_\-element} (tb\-\_\-handle\-\_\-t reader)
\item 
tb\-\_\-char\-\_\-t const $\ast$ \hyperlink{reader_8c_a743c28f0ad5c9ee291faad2cc6d8078e}{tb\-\_\-xml\-\_\-reader\-\_\-doctype} (tb\-\_\-handle\-\_\-t reader)
\item 
\hyperlink{structtb__xml__node__t}{tb\-\_\-xml\-\_\-node\-\_\-t} const $\ast$ \hyperlink{reader_8c_aadc1984e271dc7362b048dcacc366cf9}{tb\-\_\-xml\-\_\-reader\-\_\-attributes} (tb\-\_\-handle\-\_\-t reader)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The Treasure Box Library

T\-Box is free software; you can redistribute it and/or modify it under the terms of the G\-N\-U Lesser General Public License as published by the Free Software Foundation; either version 2.\-1 of the License, or (at your option) any later version.

T\-Box is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U Lesser General Public License for more details.

You should have received a copy of the G\-N\-U Lesser General Public License along with T\-Box; If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}

Copyright (C) 2009 -\/ 2012, ruki All rights reserved.

\begin{DoxyAuthor}{Author}
ruki 
\end{DoxyAuthor}


Definition in file \hyperlink{reader_8c_source}{reader.\-c}.



\subsection{Function Documentation}
\hypertarget{reader_8c_aadc1984e271dc7362b048dcacc366cf9}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-attributes@{tb\-\_\-xml\-\_\-reader\-\_\-attributes}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-attributes@{tb\-\_\-xml\-\_\-reader\-\_\-attributes}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-attributes}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-xml\-\_\-node\-\_\-t} const$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-attributes (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_aadc1984e271dc7362b048dcacc366cf9}
the current xml node attributes


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the current xml node attributes 
\end{DoxyReturn}


Definition at line 714 of file reader.\-c.



References tb\-\_\-xml\-\_\-node\-\_\-t\-::next, tb\-\_\-pstring\-\_\-chrcat(), tb\-\_\-pstring\-\_\-clear(), tb\-\_\-pstring\-\_\-cstr(), tb\-\_\-pstring\-\_\-exit(), tb\-\_\-pstring\-\_\-init(), tb\-\_\-pstring\-\_\-size(), and tb\-\_\-pstring\-\_\-strcpy().



Referenced by tb\-\_\-xml\-\_\-reader\-\_\-load(), and tb\-\_\-xml\-\_\-reader\-\_\-next().

\hypertarget{reader_8c_a4b39debde22a7979300f9e87620de567}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-cdata@{tb\-\_\-xml\-\_\-reader\-\_\-cdata}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-cdata@{tb\-\_\-xml\-\_\-reader\-\_\-cdata}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-cdata}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-char\-\_\-t const$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-cdata (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a4b39debde22a7979300f9e87620de567}
the current xml node cdata


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the current xml node cdata 
\end{DoxyReturn}


Definition at line 660 of file reader.\-c.



References tb\-\_\-pstring\-\_\-cstr(), tb\-\_\-pstring\-\_\-cstrncpy(), and tb\-\_\-pstring\-\_\-size().



Referenced by tb\-\_\-xml\-\_\-reader\-\_\-load().

\hypertarget{reader_8c_ad68775331a7038f2821d8652208aac5e}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-charset@{tb\-\_\-xml\-\_\-reader\-\_\-charset}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-charset@{tb\-\_\-xml\-\_\-reader\-\_\-charset}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-charset}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-char\-\_\-t const$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-charset (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_ad68775331a7038f2821d8652208aac5e}
the xml charset


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the xml charset 
\end{DoxyReturn}


Definition at line 638 of file reader.\-c.



References tb\-\_\-pstring\-\_\-cstr().



Referenced by tb\-\_\-xml\-\_\-reader\-\_\-load().

\hypertarget{reader_8c_a5fa80abcaa3bb9868d16e59b4ff2cba6}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-clear@{tb\-\_\-xml\-\_\-reader\-\_\-clear}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-clear@{tb\-\_\-xml\-\_\-reader\-\_\-clear}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-clear}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-xml\-\_\-reader\-\_\-clear (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a5fa80abcaa3bb9868d16e59b4ff2cba6}
clear the xml reader,\begin{DoxyNote}{Note}
the stream will be reseted
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}


Definition at line 203 of file reader.\-c.



References tb\-\_\-xml\-\_\-node\-\_\-t\-::data, tb\-\_\-xml\-\_\-node\-\_\-t\-::name, tb\-\_\-gstream\-\_\-bseek(), and tb\-\_\-pstring\-\_\-clear().

\hypertarget{reader_8c_a1b9d0042bd67a130a85f1aa00437b5b2}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-comment@{tb\-\_\-xml\-\_\-reader\-\_\-comment}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-comment@{tb\-\_\-xml\-\_\-reader\-\_\-comment}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-comment}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-char\-\_\-t const$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-comment (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a1b9d0042bd67a130a85f1aa00437b5b2}
the current xml node comment


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the current xml node comment 
\end{DoxyReturn}


Definition at line 646 of file reader.\-c.



References tb\-\_\-pstring\-\_\-cstr(), tb\-\_\-pstring\-\_\-cstrncpy(), and tb\-\_\-pstring\-\_\-size().



Referenced by tb\-\_\-xml\-\_\-reader\-\_\-load().

\hypertarget{reader_8c_a743c28f0ad5c9ee291faad2cc6d8078e}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-doctype@{tb\-\_\-xml\-\_\-reader\-\_\-doctype}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-doctype@{tb\-\_\-xml\-\_\-reader\-\_\-doctype}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-doctype}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-char\-\_\-t const$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-doctype (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a743c28f0ad5c9ee291faad2cc6d8078e}
the xml document type


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the xml document type 
\end{DoxyReturn}


Definition at line 702 of file reader.\-c.



References tb\-\_\-pstring\-\_\-cstr().



Referenced by tb\-\_\-xml\-\_\-reader\-\_\-load().

\hypertarget{reader_8c_a635184d02d840becb6e7576e32f572ea}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-element@{tb\-\_\-xml\-\_\-reader\-\_\-element}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-element@{tb\-\_\-xml\-\_\-reader\-\_\-element}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-element}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-char\-\_\-t const$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-element (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a635184d02d840becb6e7576e32f572ea}
the current xml element name


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the current xml element name 
\end{DoxyReturn}


Definition at line 682 of file reader.\-c.



References tb\-\_\-pstring\-\_\-cstr(), tb\-\_\-pstring\-\_\-cstrncpy(), and tb\-\_\-pstring\-\_\-size().



Referenced by tb\-\_\-xml\-\_\-reader\-\_\-goto(), and tb\-\_\-xml\-\_\-reader\-\_\-load().

\hypertarget{reader_8c_a805b1348ac7e5acd52c257ab6901fe26}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-exit@{tb\-\_\-xml\-\_\-reader\-\_\-exit}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-exit@{tb\-\_\-xml\-\_\-reader\-\_\-exit}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-exit}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-xml\-\_\-reader\-\_\-exit (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a805b1348ac7e5acd52c257ab6901fe26}
exit the xml reader


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}


Definition at line 167 of file reader.\-c.



References tb\-\_\-xml\-\_\-node\-\_\-t\-::data, tb\-\_\-xml\-\_\-node\-\_\-t\-::name, tb\-\_\-gstream\-\_\-exit(), and tb\-\_\-pstring\-\_\-exit().

\hypertarget{reader_8c_a8b2a9e616b42b2c968d2a2f6438611a6}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-goto@{tb\-\_\-xml\-\_\-reader\-\_\-goto}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-goto@{tb\-\_\-xml\-\_\-reader\-\_\-goto}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-goto}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-bool\-\_\-t tb\-\_\-xml\-\_\-reader\-\_\-goto (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader, }
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{path}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a8b2a9e616b42b2c968d2a2f6438611a6}
seek to the given node for xml, .e.\-g /root/node/item


\begin{DoxyParams}{Parameters}
{\em reader} & the reader handle \\
\hline
{\em path} & the xml path \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tb\-\_\-true or tb\-\_\-false
\end{DoxyReturn}
\begin{DoxyNote}{Note}
the stream will be reseted 
\end{DoxyNote}


Definition at line 419 of file reader.\-c.



References tb\-\_\-gstream\-\_\-bseek(), tb\-\_\-gstream\-\_\-offset(), tb\-\_\-sstring\-\_\-chrcat(), tb\-\_\-sstring\-\_\-cstr(), tb\-\_\-sstring\-\_\-cstrcat(), tb\-\_\-sstring\-\_\-cstricmp(), tb\-\_\-sstring\-\_\-exit(), tb\-\_\-sstring\-\_\-init(), tb\-\_\-sstring\-\_\-size(), tb\-\_\-sstring\-\_\-strip(), tb\-\_\-sstring\-\_\-strrchr(), tb\-\_\-xml\-\_\-reader\-\_\-element(), and tb\-\_\-xml\-\_\-reader\-\_\-next().

\hypertarget{reader_8c_a97c7abbb1be9bae8be2e3d5df7311486}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-init@{tb\-\_\-xml\-\_\-reader\-\_\-init}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-init@{tb\-\_\-xml\-\_\-reader\-\_\-init}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-handle\-\_\-t tb\-\_\-xml\-\_\-reader\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-gstream\-\_\-t} $\ast$}]{gst}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a97c7abbb1be9bae8be2e3d5df7311486}
init the xml reader


\begin{DoxyParams}{Parameters}
{\em gst} & the stream \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the reader handle 
\end{DoxyReturn}


Definition at line 132 of file reader.\-c.



References tb\-\_\-xml\-\_\-node\-\_\-t\-::data, tb\-\_\-xml\-\_\-node\-\_\-t\-::name, tb\-\_\-pstring\-\_\-cstrcpy(), and tb\-\_\-pstring\-\_\-init().

\hypertarget{reader_8c_a57b67fb2b664c74da8fd170249e97853}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-level@{tb\-\_\-xml\-\_\-reader\-\_\-level}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-level@{tb\-\_\-xml\-\_\-reader\-\_\-level}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-level}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-size\-\_\-t tb\-\_\-xml\-\_\-reader\-\_\-level (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a57b67fb2b664c74da8fd170249e97853}
the xml level


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the xml level for tab spaces 
\end{DoxyReturn}


Definition at line 239 of file reader.\-c.

\hypertarget{reader_8c_a4805eec28d557c50984124faf7330ea9}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-load@{tb\-\_\-xml\-\_\-reader\-\_\-load}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-load@{tb\-\_\-xml\-\_\-reader\-\_\-load}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-load}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-xml\-\_\-node\-\_\-t}$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-load (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a4805eec28d557c50984124faf7330ea9}
load the xml


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the xml root node 
\end{DoxyReturn}


Definition at line 510 of file reader.\-c.



References tb\-\_\-xml\-\_\-node\-\_\-t\-::data, tb\-\_\-xml\-\_\-node\-\_\-t\-::name, tb\-\_\-xml\-\_\-node\-\_\-t\-::next, tb\-\_\-xml\-\_\-node\-\_\-t\-::parent, tb\-\_\-pstring\-\_\-cstr(), tb\-\_\-xml\-\_\-node\-\_\-append\-\_\-atail(), tb\-\_\-xml\-\_\-node\-\_\-append\-\_\-ctail(), tb\-\_\-xml\-\_\-node\-\_\-exit(), tb\-\_\-xml\-\_\-node\-\_\-init\-\_\-attribute(), tb\-\_\-xml\-\_\-node\-\_\-init\-\_\-cdata(), tb\-\_\-xml\-\_\-node\-\_\-init\-\_\-comment(), tb\-\_\-xml\-\_\-node\-\_\-init\-\_\-document(), tb\-\_\-xml\-\_\-node\-\_\-init\-\_\-document\-\_\-type(), tb\-\_\-xml\-\_\-node\-\_\-init\-\_\-element(), tb\-\_\-xml\-\_\-node\-\_\-init\-\_\-text(), tb\-\_\-xml\-\_\-reader\-\_\-attributes(), tb\-\_\-xml\-\_\-reader\-\_\-cdata(), tb\-\_\-xml\-\_\-reader\-\_\-charset(), tb\-\_\-xml\-\_\-reader\-\_\-comment(), tb\-\_\-xml\-\_\-reader\-\_\-doctype(), tb\-\_\-xml\-\_\-reader\-\_\-element(), tb\-\_\-xml\-\_\-reader\-\_\-next(), tb\-\_\-xml\-\_\-reader\-\_\-text(), and tb\-\_\-xml\-\_\-reader\-\_\-version().

\hypertarget{reader_8c_a416870362f120fdfdbea3dfcd1c21437}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-next@{tb\-\_\-xml\-\_\-reader\-\_\-next}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-next@{tb\-\_\-xml\-\_\-reader\-\_\-next}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-next}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-size\-\_\-t tb\-\_\-xml\-\_\-reader\-\_\-next (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a416870362f120fdfdbea3dfcd1c21437}
the next iterator for the xml reader


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the iterator event
\end{DoxyReturn}

\begin{DoxyCode}
\textcolor{comment}{// init stream}
\hyperlink{structtb__gstream__t}{tb\_gstream\_t}* gst = \hyperlink{gstream_8c_acbda8c5dc8f8efe26bcf1f768c147361}{tb\_gstream\_init\_from\_url}(argv[1]);
\textcolor{keywordflow}{if} (gst && \hyperlink{gstream_8c_a4dfd2c187c759392219e334436a2bcfb}{tb\_gstream\_bopen}(gst))
\{
    \textcolor{comment}{// init reader}
    tb\_handle\_t reader = \hyperlink{reader_8c_a97c7abbb1be9bae8be2e3d5df7311486}{tb\_xml\_reader\_init}(gst);
    \textcolor{keywordflow}{if} (reader)
    \{
        \textcolor{comment}{// walk}
        tb\_size\_t e = TB\_XML\_READER\_EVENT\_NONE;
        \textcolor{keywordflow}{while} (e = \hyperlink{reader_8c_a416870362f120fdfdbea3dfcd1c21437}{tb\_xml\_reader\_next}(reader))
        \{
            \textcolor{keywordflow}{switch} (e)
            \{
            \textcolor{keywordflow}{case} TB\_XML\_READER\_EVENT\_DOCUMENT: 
                \{
                    \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"<?xml version = \(\backslash\)"%s\(\backslash\)" encoding = \(\backslash\)"%s\(\backslash\)" ?>\(\backslash\)n"}
                        , \hyperlink{reader_8c_a85477831abfe7a0b10f73f1c0cbfecc5}{tb\_xml\_reader\_version}(reader), tb\_xml\_reader\_encoding(reader
      ));
                \}
                \textcolor{keywordflow}{break};
            \textcolor{keywordflow}{case} TB\_XML\_READER\_EVENT\_DOCUMENT\_TYPE: 
                \{
                    \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"<!DOCTYPE>\(\backslash\)n"});
                \}
                \textcolor{keywordflow}{break};
            \textcolor{keywordflow}{case} TB\_XML\_READER\_EVENT\_ELEMENT\_EMPTY: 
                \{
                    tb\_char\_t \textcolor{keyword}{const}*        name = \hyperlink{reader_8c_a635184d02d840becb6e7576e32f572ea}{tb\_xml\_reader\_element}(reader);
                    \hyperlink{structtb__xml__node__t}{tb\_xml\_node\_t} \textcolor{keyword}{const}*    attr = 
      \hyperlink{reader_8c_aadc1984e271dc7362b048dcacc366cf9}{tb\_xml\_reader\_attributes}(reader);
                    \textcolor{keywordflow}{if} (!attr) \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"<%s/>\(\backslash\)n"}, name);
                    \textcolor{keywordflow}{else}
                    \{
                        \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"<%s"}, name);
                        \textcolor{keywordflow}{for} (; attr; attr = attr->\hyperlink{structtb__xml__node__t_aa2283c0ea0b534025260797b299304e3}{next})
                            \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{" %s = \(\backslash\)"%s\(\backslash\)""}, \hyperlink{pstring_8c_a9670dcf8bf2db8ff22c9ea3a25bac88c}{tb\_pstring\_cstr}(&attr->
      \hyperlink{structtb__xml__node__t_af7f1417aacca26f6c9fd7ee8c019b77f}{name}), \hyperlink{pstring_8c_a9670dcf8bf2db8ff22c9ea3a25bac88c}{tb\_pstring\_cstr}(&attr->\hyperlink{structtb__xml__node__t_ad9719f909e3d24ad13f072591eb8c42e}{data}));
                        \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"/>\(\backslash\)n"});
                    \}
                \}
                \textcolor{keywordflow}{break};
            \textcolor{keywordflow}{case} TB\_XML\_READER\_EVENT\_ELEMENT\_BEG: 
                \{
                    tb\_char\_t \textcolor{keyword}{const}*        name = \hyperlink{reader_8c_a635184d02d840becb6e7576e32f572ea}{tb\_xml\_reader\_element}(reader);
                    \hyperlink{structtb__xml__node__t}{tb\_xml\_node\_t} \textcolor{keyword}{const}*    attr = 
      \hyperlink{reader_8c_aadc1984e271dc7362b048dcacc366cf9}{tb\_xml\_reader\_attributes}(reader);
                    \textcolor{keywordflow}{if} (!attr) \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"<%s>\(\backslash\)n"}, name);
                    \textcolor{keywordflow}{else}
                    \{
                        \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"<%s"}, name);
                        \textcolor{keywordflow}{for} (; attr; attr = attr->\hyperlink{structtb__xml__node__t_aa2283c0ea0b534025260797b299304e3}{next})
                            \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{" %s = \(\backslash\)"%s\(\backslash\)""}, \hyperlink{pstring_8c_a9670dcf8bf2db8ff22c9ea3a25bac88c}{tb\_pstring\_cstr}(&attr->
      \hyperlink{structtb__xml__node__t_af7f1417aacca26f6c9fd7ee8c019b77f}{name}), \hyperlink{pstring_8c_a9670dcf8bf2db8ff22c9ea3a25bac88c}{tb\_pstring\_cstr}(&attr->\hyperlink{structtb__xml__node__t_ad9719f909e3d24ad13f072591eb8c42e}{data}));
                        \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{">\(\backslash\)n"});
                    \}
                \}
                \textcolor{keywordflow}{break};
            \textcolor{keywordflow}{case} TB\_XML\_READER\_EVENT\_ELEMENT\_END: 
                \{
                    \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"</%s>\(\backslash\)n"}, \hyperlink{reader_8c_a635184d02d840becb6e7576e32f572ea}{tb\_xml\_reader\_element}(reader));
                \}
            \textcolor{keywordflow}{break};
            \textcolor{keywordflow}{case} TB\_XML\_READER\_EVENT\_TEXT: 
                \{
                    \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"%s"}, \hyperlink{reader_8c_a6b1e8e60c214c924132dc68ec88b4dec}{tb\_xml\_reader\_text}(reader));
                \}
                \textcolor{keywordflow}{break};
            \textcolor{keywordflow}{case} TB\_XML\_READER\_EVENT\_CDATA: 
                \{
                    \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"<![CDATA[%s]]>"}, \hyperlink{reader_8c_a4b39debde22a7979300f9e87620de567}{tb\_xml\_reader\_cdata}(reader));
                \}
                \textcolor{keywordflow}{break};
            \textcolor{keywordflow}{case} TB\_XML\_READER\_EVENT\_COMMENT: 
                \{
                    \hyperlink{printf_8h_a7cc6cdb1652d9e46160d5152b5c4f063}{tb\_printf}(\textcolor{stringliteral}{"<!--%s-->"}, \hyperlink{reader_8c_a1b9d0042bd67a130a85f1aa00437b5b2}{tb\_xml\_reader\_comment}(reader));
                \}
                \textcolor{keywordflow}{break};
            \textcolor{keywordflow}{default}:
                \textcolor{keywordflow}{break};
            \}
        \}

        \textcolor{comment}{// exit reader}
        \hyperlink{reader_8c_a805b1348ac7e5acd52c257ab6901fe26}{tb\_xml\_reader\_exit}(reader);
    \}

    \textcolor{comment}{// exit stream}
    \hyperlink{gstream_8c_af33367b8da4247a4caf10410433820f3}{tb\_gstream\_exit}(gst);
\}
\end{DoxyCode}
 

Definition at line 246 of file reader.\-c.



References tb\-\_\-xml\-\_\-node\-\_\-t\-::data, tb\-\_\-xml\-\_\-node\-\_\-t\-::name, tb\-\_\-xml\-\_\-node\-\_\-t\-::next, tb\-\_\-gstream\-\_\-bneed(), tb\-\_\-gstream\-\_\-bopen(), tb\-\_\-gstream\-\_\-bread\-\_\-s8(), tb\-\_\-pstring\-\_\-chrcat(), tb\-\_\-pstring\-\_\-cstr(), tb\-\_\-pstring\-\_\-cstrcmp(), tb\-\_\-pstring\-\_\-cstrcpy(), tb\-\_\-pstring\-\_\-cstricmp(), tb\-\_\-pstring\-\_\-cstrncpy(), tb\-\_\-pstring\-\_\-size(), tb\-\_\-pstring\-\_\-strcpy(), and tb\-\_\-xml\-\_\-reader\-\_\-attributes().



Referenced by tb\-\_\-xml\-\_\-reader\-\_\-goto(), and tb\-\_\-xml\-\_\-reader\-\_\-load().

\hypertarget{reader_8c_ab2bd29f39f1086dc3ce2efa5af4a5aa4}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-stream@{tb\-\_\-xml\-\_\-reader\-\_\-stream}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-stream@{tb\-\_\-xml\-\_\-reader\-\_\-stream}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-stream}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-gstream\-\_\-t}$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-stream (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_ab2bd29f39f1086dc3ce2efa5af4a5aa4}
the xml stream


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the xml stream 
\end{DoxyReturn}


Definition at line 232 of file reader.\-c.

\hypertarget{reader_8c_a6b1e8e60c214c924132dc68ec88b4dec}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-text@{tb\-\_\-xml\-\_\-reader\-\_\-text}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-text@{tb\-\_\-xml\-\_\-reader\-\_\-text}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-text}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-char\-\_\-t const$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-text (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a6b1e8e60c214c924132dc68ec88b4dec}
the current xml node text


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the current xml node text 
\end{DoxyReturn}


Definition at line 674 of file reader.\-c.



References tb\-\_\-pstring\-\_\-cstr().



Referenced by tb\-\_\-xml\-\_\-reader\-\_\-load().

\hypertarget{reader_8c_a85477831abfe7a0b10f73f1c0cbfecc5}{\index{reader.\-c@{reader.\-c}!tb\-\_\-xml\-\_\-reader\-\_\-version@{tb\-\_\-xml\-\_\-reader\-\_\-version}}
\index{tb\-\_\-xml\-\_\-reader\-\_\-version@{tb\-\_\-xml\-\_\-reader\-\_\-version}!reader.c@{reader.\-c}}
\subsubsection[{tb\-\_\-xml\-\_\-reader\-\_\-version}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-char\-\_\-t const$\ast$ tb\-\_\-xml\-\_\-reader\-\_\-version (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{reader}
\end{DoxyParamCaption}
)}}\label{d5/dd9/reader_8c_a85477831abfe7a0b10f73f1c0cbfecc5}
the xml version


\begin{DoxyParams}{Parameters}
{\em reader} & the xml reader \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the xml version 
\end{DoxyReturn}


Definition at line 630 of file reader.\-c.



References tb\-\_\-pstring\-\_\-cstr().



Referenced by tb\-\_\-xml\-\_\-reader\-\_\-load().

