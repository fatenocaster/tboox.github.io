\hypertarget{timer_8c}{\section{src/tbox/platform/timer.c File Reference}
\label{timer_8c}\index{src/tbox/platform/timer.\-c@{src/tbox/platform/timer.\-c}}
}
{\ttfamily \#include \char`\"{}platform.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../memory/memory.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../container/container.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../algorithm/algorithm.\-h\char`\"{}}\\*
Include dependency graph for timer.\-c\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d1/d56/timer_8c__incl}
\end{center}
\end{figure}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{timer_8c_a2aa61763aba311653f75dfdea928da4e}{\#define {\bfseries T\-B\-\_\-\-T\-R\-A\-C\-E\-\_\-\-M\-O\-D\-U\-L\-E\-\_\-\-N\-A\-M\-E}~\char`\"{}timer\char`\"{}}\label{timer_8c_a2aa61763aba311653f75dfdea928da4e}

\item 
\hypertarget{timer_8c_ab5dd5585b246c36fdb275f9781170000}{\#define {\bfseries T\-B\-\_\-\-T\-R\-A\-C\-E\-\_\-\-M\-O\-D\-U\-L\-E\-\_\-\-D\-E\-B\-U\-G}~(0)}\label{timer_8c_ab5dd5585b246c36fdb275f9781170000}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} \hyperlink{timer_8c_adadbec14ca9eff294e26b23bbda7ce82}{tb\-\_\-timer\-\_\-init} (tb\-\_\-size\-\_\-t maxn, tb\-\_\-bool\-\_\-t ctime)
\item 
tb\-\_\-void\-\_\-t \hyperlink{timer_8c_ab40ab6ff0c6db21e4aec809e5c070e00}{tb\-\_\-timer\-\_\-exit} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer)
\item 
tb\-\_\-void\-\_\-t \hyperlink{timer_8c_a62eedb678a52d494b6caec3245673f54}{tb\-\_\-timer\-\_\-clear} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer)
\item 
tb\-\_\-hize\-\_\-t \hyperlink{timer_8c_a4f8073b204490014d962f6202292f4f1}{tb\-\_\-timer\-\_\-top} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer)
\item 
tb\-\_\-size\-\_\-t \hyperlink{timer_8c_ac7a2d82c4fa4a92eea4603993aacd7b1}{tb\-\_\-timer\-\_\-delay} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer)
\item 
tb\-\_\-bool\-\_\-t \hyperlink{timer_8c_ad546c817d69f924f5c25a2806d02924b}{tb\-\_\-timer\-\_\-spak} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer)
\item 
tb\-\_\-void\-\_\-t \hyperlink{timer_8c_a91dd1b20d3b6fd5737be999a83bf1ec0}{tb\-\_\-timer\-\_\-loop} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer)
\item 
\hyperlink{structtb__timer__task__ref__t}{tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t} \hyperlink{timer_8c_abdfa23b32c519a865b50e2efbfa5721f}{tb\-\_\-timer\-\_\-task\-\_\-init} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer, tb\-\_\-size\-\_\-t delay, tb\-\_\-bool\-\_\-t repeat, \hyperlink{timer_8h_adefed3c3416e08c7c2df94aff9af68c0}{tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t} func, tb\-\_\-cpointer\-\_\-t priv)
\item 
\hyperlink{structtb__timer__task__ref__t}{tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t} \hyperlink{timer_8c_a018600802d9e3b234b26e6d5b087e049}{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-at} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer, tb\-\_\-hize\-\_\-t when, tb\-\_\-size\-\_\-t period, tb\-\_\-bool\-\_\-t repeat, \hyperlink{timer_8h_adefed3c3416e08c7c2df94aff9af68c0}{tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t} func, tb\-\_\-cpointer\-\_\-t priv)
\item 
\hyperlink{structtb__timer__task__ref__t}{tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t} \hyperlink{timer_8c_ab57bd578331100028e22b7e7071dda7a}{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-after} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer, tb\-\_\-hize\-\_\-t after, tb\-\_\-size\-\_\-t period, tb\-\_\-bool\-\_\-t repeat, \hyperlink{timer_8h_adefed3c3416e08c7c2df94aff9af68c0}{tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t} func, tb\-\_\-cpointer\-\_\-t priv)
\item 
tb\-\_\-void\-\_\-t \hyperlink{timer_8c_ae9a5b0402ef16db42211b53a554c8388}{tb\-\_\-timer\-\_\-task\-\_\-post} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer, tb\-\_\-size\-\_\-t delay, tb\-\_\-bool\-\_\-t repeat, \hyperlink{timer_8h_adefed3c3416e08c7c2df94aff9af68c0}{tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t} func, tb\-\_\-cpointer\-\_\-t priv)
\item 
tb\-\_\-void\-\_\-t \hyperlink{timer_8c_a5b1ccc3fcc365c9b326d98601efe106f}{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-at} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer, tb\-\_\-hize\-\_\-t when, tb\-\_\-size\-\_\-t period, tb\-\_\-bool\-\_\-t repeat, \hyperlink{timer_8h_adefed3c3416e08c7c2df94aff9af68c0}{tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t} func, tb\-\_\-cpointer\-\_\-t priv)
\item 
tb\-\_\-void\-\_\-t \hyperlink{timer_8c_ac513aa22427d73d9d3e9d333e8866fde}{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-after} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer, tb\-\_\-hize\-\_\-t after, tb\-\_\-size\-\_\-t period, tb\-\_\-bool\-\_\-t repeat, \hyperlink{timer_8h_adefed3c3416e08c7c2df94aff9af68c0}{tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t} func, tb\-\_\-cpointer\-\_\-t priv)
\item 
tb\-\_\-void\-\_\-t \hyperlink{timer_8c_af8a9e261f92c99cf65400918a19c925f}{tb\-\_\-timer\-\_\-task\-\_\-exit} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer, \hyperlink{structtb__timer__task__ref__t}{tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t} task)
\item 
tb\-\_\-void\-\_\-t \hyperlink{timer_8c_ac24d1aa6aee3a0764db1c5095728ae7a}{tb\-\_\-timer\-\_\-task\-\_\-kill} (\hyperlink{structtb__timer__ref__t}{tb\-\_\-timer\-\_\-ref\-\_\-t} timer, \hyperlink{structtb__timer__task__ref__t}{tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t} task)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The Treasure Box Library

T\-Box is free software; you can redistribute it and/or modify it under the terms of the G\-N\-U Lesser General Public License as published by the Free Software Foundation; either version 2.\-1 of the License, or (at your option) any later version.

T\-Box is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U Lesser General Public License for more details.

You should have received a copy of the G\-N\-U Lesser General Public License along with T\-Box; If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}

Copyright (C) 2009 -\/ 2015, ruki All rights reserved.

\begin{DoxyAuthor}{Author}
ruki 
\end{DoxyAuthor}


Definition in file \hyperlink{timer_8c_source}{timer.\-c}.



\subsection{Function Documentation}
\hypertarget{timer_8c_a62eedb678a52d494b6caec3245673f54}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-clear@{tb\-\_\-timer\-\_\-clear}}
\index{tb\-\_\-timer\-\_\-clear@{tb\-\_\-timer\-\_\-clear}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-clear}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-timer\-\_\-clear (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer}
\end{DoxyParamCaption}
)}}\label{timer_8c_a62eedb678a52d494b6caec3245673f54}
clear timer


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
\end{DoxyParams}


Definition at line 227 of file timer.\-c.



References tb\-\_\-fixed\-\_\-pool\-\_\-clear(), and tb\-\_\-heap\-\_\-clear().

\hypertarget{timer_8c_ac7a2d82c4fa4a92eea4603993aacd7b1}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-delay@{tb\-\_\-timer\-\_\-delay}}
\index{tb\-\_\-timer\-\_\-delay@{tb\-\_\-timer\-\_\-delay}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-delay}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-size\-\_\-t tb\-\_\-timer\-\_\-delay (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer}
\end{DoxyParamCaption}
)}}\label{timer_8c_ac7a2d82c4fa4a92eea4603993aacd7b1}
the timer delay for spak


\begin{DoxyParams}{Parameters}
{\em timer} & the timer\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the timer delay, (tb\-\_\-size\-\_\-t)-\/1\-: error or no task 
\end{DoxyReturn}


Definition at line 272 of file timer.\-c.



References tb\-\_\-heap\-\_\-size(), and tb\-\_\-heap\-\_\-top().



Referenced by tb\-\_\-timer\-\_\-loop().

\hypertarget{timer_8c_ab40ab6ff0c6db21e4aec809e5c070e00}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-exit@{tb\-\_\-timer\-\_\-exit}}
\index{tb\-\_\-timer\-\_\-exit@{tb\-\_\-timer\-\_\-exit}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-exit}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-timer\-\_\-exit (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer}
\end{DoxyParamCaption}
)}}\label{timer_8c_ab40ab6ff0c6db21e4aec809e5c070e00}
exit timer


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
\end{DoxyParams}


Definition at line 181 of file timer.\-c.



References tb\-\_\-event\-\_\-exit(), tb\-\_\-event\-\_\-post(), tb\-\_\-fixed\-\_\-pool\-\_\-exit(), and tb\-\_\-heap\-\_\-exit().



Referenced by tb\-\_\-timer\-\_\-init().

\hypertarget{timer_8c_adadbec14ca9eff294e26b23bbda7ce82}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-init@{tb\-\_\-timer\-\_\-init}}
\index{tb\-\_\-timer\-\_\-init@{tb\-\_\-timer\-\_\-init}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-timer\-\_\-ref\-\_\-t} tb\-\_\-timer\-\_\-init (
\begin{DoxyParamCaption}
\item[{tb\-\_\-size\-\_\-t}]{maxn, }
\item[{tb\-\_\-bool\-\_\-t}]{ctime}
\end{DoxyParamCaption}
)}}\label{timer_8c_adadbec14ca9eff294e26b23bbda7ce82}
init timer

lower tick and limit range, but faster


\begin{DoxyParams}{Parameters}
{\em maxn} & the timer maxn \\
\hline
{\em ctime} & using ctime?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the timer 
\end{DoxyReturn}


Definition at line 132 of file timer.\-c.



References tb\-\_\-item\-\_\-func\-\_\-t\-::comp, tb\-\_\-fixed\-\_\-pool\-\_\-init(), tb\-\_\-heap\-\_\-init(), tb\-\_\-item\-\_\-func\-\_\-ptr(), tb\-\_\-lock\-\_\-profiler(), tb\-\_\-lock\-\_\-profiler\-\_\-register(), and tb\-\_\-timer\-\_\-exit().

\hypertarget{timer_8c_a91dd1b20d3b6fd5737be999a83bf1ec0}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-loop@{tb\-\_\-timer\-\_\-loop}}
\index{tb\-\_\-timer\-\_\-loop@{tb\-\_\-timer\-\_\-loop}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-loop}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-timer\-\_\-loop (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer}
\end{DoxyParamCaption}
)}}\label{timer_8c_a91dd1b20d3b6fd5737be999a83bf1ec0}
loop timer for the external thread


\begin{DoxyCode}
tb\_void\_t tb\_timer\_thread(tb\_cpointer\_t priv)
\{
     \hyperlink{timer_8c_a91dd1b20d3b6fd5737be999a83bf1ec0}{tb\_timer\_loop}(timer);
\}
\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em timer} & the timer\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tb\-\_\-true or tb\-\_\-false 
\end{DoxyReturn}


Definition at line 387 of file timer.\-c.



References tb\-\_\-cache\-\_\-time\-\_\-spak(), tb\-\_\-event\-\_\-init(), tb\-\_\-event\-\_\-wait(), tb\-\_\-timer\-\_\-delay(), and tb\-\_\-timer\-\_\-spak().

\hypertarget{timer_8c_ad546c817d69f924f5c25a2806d02924b}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-spak@{tb\-\_\-timer\-\_\-spak}}
\index{tb\-\_\-timer\-\_\-spak@{tb\-\_\-timer\-\_\-spak}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-spak}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-bool\-\_\-t tb\-\_\-timer\-\_\-spak (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer}
\end{DoxyParamCaption}
)}}\label{timer_8c_ad546c817d69f924f5c25a2806d02924b}
spak timer for the external loop at the single thread


\begin{DoxyCode}
tb\_void\_t \hyperlink{timer_8c_a91dd1b20d3b6fd5737be999a83bf1ec0}{tb\_timer\_loop}()
\{
     \textcolor{keywordflow}{while} (1)
     \{
         \textcolor{comment}{// wait}
         wait(\hyperlink{timer_8c_ac7a2d82c4fa4a92eea4603993aacd7b1}{tb\_timer\_delay}(timer))

         \textcolor{comment}{// spak timer}
         \hyperlink{timer_8c_ad546c817d69f924f5c25a2806d02924b}{tb\_timer\_spak}(timer);
     \}
\}
\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em timer} & the timer\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tb\-\_\-true or tb\-\_\-false 
\end{DoxyReturn}


Definition at line 306 of file timer.\-c.



References tb\-\_\-heap\-\_\-pop(), tb\-\_\-heap\-\_\-put(), tb\-\_\-heap\-\_\-size(), tb\-\_\-heap\-\_\-top(), and tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t.



Referenced by tb\-\_\-timer\-\_\-loop().

\hypertarget{timer_8c_af8a9e261f92c99cf65400918a19c925f}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-task\-\_\-exit@{tb\-\_\-timer\-\_\-task\-\_\-exit}}
\index{tb\-\_\-timer\-\_\-task\-\_\-exit@{tb\-\_\-timer\-\_\-task\-\_\-exit}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-task\-\_\-exit}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-timer\-\_\-task\-\_\-exit (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer, }
\item[{{\bf tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t}}]{task}
\end{DoxyParamCaption}
)}}\label{timer_8c_af8a9e261f92c99cf65400918a19c925f}
exit timer task, the task will be not called if have been not called


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
{\em task} & the timer task \\
\hline
\end{DoxyParams}


Definition at line 561 of file timer.\-c.

\hypertarget{timer_8c_abdfa23b32c519a865b50e2efbfa5721f}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-task\-\_\-init@{tb\-\_\-timer\-\_\-task\-\_\-init}}
\index{tb\-\_\-timer\-\_\-task\-\_\-init@{tb\-\_\-timer\-\_\-task\-\_\-init}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-task\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t} tb\-\_\-timer\-\_\-task\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer, }
\item[{tb\-\_\-size\-\_\-t}]{delay, }
\item[{tb\-\_\-bool\-\_\-t}]{repeat, }
\item[{{\bf tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t}}]{func, }
\item[{tb\-\_\-cpointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{timer_8c_abdfa23b32c519a865b50e2efbfa5721f}
init and post timer task after delay and need remove it manually


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
{\em delay} & the delay time, ms \\
\hline
{\em repeat} & is repeat? \\
\hline
{\em func} & the timer func \\
\hline
{\em priv} & the timer priv\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the timer task 
\end{DoxyReturn}


Definition at line 428 of file timer.\-c.



References tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-at().

\hypertarget{timer_8c_ab57bd578331100028e22b7e7071dda7a}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-after@{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-after}}
\index{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-after@{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-after}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-after}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t} tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-after (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer, }
\item[{tb\-\_\-hize\-\_\-t}]{after, }
\item[{tb\-\_\-size\-\_\-t}]{period, }
\item[{tb\-\_\-bool\-\_\-t}]{repeat, }
\item[{{\bf tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t}}]{func, }
\item[{tb\-\_\-cpointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{timer_8c_ab57bd578331100028e22b7e7071dda7a}
init and post timer task after the relative time and need remove it manually


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
{\em after} & the after time, ms \\
\hline
{\em period} & the period time, ms \\
\hline
{\em repeat} & is repeat? \\
\hline
{\em func} & the timer func \\
\hline
{\em priv} & the timer priv\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the timer task 
\end{DoxyReturn}


Definition at line 487 of file timer.\-c.



References tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-at().

\hypertarget{timer_8c_a018600802d9e3b234b26e6d5b087e049}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-at@{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-at}}
\index{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-at@{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-at}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-at}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t} tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-at (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer, }
\item[{tb\-\_\-hize\-\_\-t}]{when, }
\item[{tb\-\_\-size\-\_\-t}]{period, }
\item[{tb\-\_\-bool\-\_\-t}]{repeat, }
\item[{{\bf tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t}}]{func, }
\item[{tb\-\_\-cpointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{timer_8c_a018600802d9e3b234b26e6d5b087e049}
init and post timer task at the absolute time and need remove it manually


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
{\em when} & the absolute time, ms \\
\hline
{\em period} & the period time, ms \\
\hline
{\em repeat} & is repeat? \\
\hline
{\em func} & the timer func \\
\hline
{\em priv} & the timer priv\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the timer task 
\end{DoxyReturn}


Definition at line 437 of file timer.\-c.



References tb\-\_\-event\-\_\-post(), tb\-\_\-heap\-\_\-put(), tb\-\_\-heap\-\_\-size(), and tb\-\_\-heap\-\_\-top().



Referenced by tb\-\_\-timer\-\_\-task\-\_\-init(), and tb\-\_\-timer\-\_\-task\-\_\-init\-\_\-after().

\hypertarget{timer_8c_ac24d1aa6aee3a0764db1c5095728ae7a}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-task\-\_\-kill@{tb\-\_\-timer\-\_\-task\-\_\-kill}}
\index{tb\-\_\-timer\-\_\-task\-\_\-kill@{tb\-\_\-timer\-\_\-task\-\_\-kill}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-task\-\_\-kill}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-timer\-\_\-task\-\_\-kill (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer, }
\item[{{\bf tb\-\_\-timer\-\_\-task\-\_\-ref\-\_\-t}}]{task}
\end{DoxyParamCaption}
)}}\label{timer_8c_ac24d1aa6aee3a0764db1c5095728ae7a}
kill timer task, the task will be called immediately if have been not called


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
{\em task} & the timer task \\
\hline
\end{DoxyParams}


Definition at line 591 of file timer.\-c.



References tb\-\_\-find\-\_\-all\-\_\-if(), tb\-\_\-heap\-\_\-del(), tb\-\_\-heap\-\_\-put(), and tb\-\_\-iterator\-\_\-tail().

\hypertarget{timer_8c_ae9a5b0402ef16db42211b53a554c8388}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-task\-\_\-post@{tb\-\_\-timer\-\_\-task\-\_\-post}}
\index{tb\-\_\-timer\-\_\-task\-\_\-post@{tb\-\_\-timer\-\_\-task\-\_\-post}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-task\-\_\-post}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-timer\-\_\-task\-\_\-post (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer, }
\item[{tb\-\_\-size\-\_\-t}]{delay, }
\item[{tb\-\_\-bool\-\_\-t}]{repeat, }
\item[{{\bf tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t}}]{func, }
\item[{tb\-\_\-cpointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{timer_8c_ae9a5b0402ef16db42211b53a554c8388}
post timer task after delay and will be auto-\/remove it after be expired


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
{\em delay} & the delay time, ms \\
\hline
{\em repeat} & is repeat? \\
\hline
{\em func} & the timer func \\
\hline
{\em priv} & the timer priv \\
\hline
\end{DoxyParams}


Definition at line 496 of file timer.\-c.



References tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-at().

\hypertarget{timer_8c_ac513aa22427d73d9d3e9d333e8866fde}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-after@{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-after}}
\index{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-after@{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-after}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-after}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-after (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer, }
\item[{tb\-\_\-hize\-\_\-t}]{after, }
\item[{tb\-\_\-size\-\_\-t}]{period, }
\item[{tb\-\_\-bool\-\_\-t}]{repeat, }
\item[{{\bf tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t}}]{func, }
\item[{tb\-\_\-cpointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{timer_8c_ac513aa22427d73d9d3e9d333e8866fde}
post timer task after the relative time and will be auto-\/remove it after be expired


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
{\em after} & the after time, ms \\
\hline
{\em period} & the period time, ms \\
\hline
{\em repeat} & is repeat? \\
\hline
{\em func} & the timer func \\
\hline
{\em priv} & the timer priv \\
\hline
\end{DoxyParams}


Definition at line 552 of file timer.\-c.



References tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-at().

\hypertarget{timer_8c_a5b1ccc3fcc365c9b326d98601efe106f}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-at@{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-at}}
\index{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-at@{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-at}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-at}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-at (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer, }
\item[{tb\-\_\-hize\-\_\-t}]{when, }
\item[{tb\-\_\-size\-\_\-t}]{period, }
\item[{tb\-\_\-bool\-\_\-t}]{repeat, }
\item[{{\bf tb\-\_\-timer\-\_\-task\-\_\-func\-\_\-t}}]{func, }
\item[{tb\-\_\-cpointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{timer_8c_a5b1ccc3fcc365c9b326d98601efe106f}
post timer task at the absolute time and will be auto-\/remove it after be expired


\begin{DoxyParams}{Parameters}
{\em timer} & the timer \\
\hline
{\em when} & the absolute time, ms \\
\hline
{\em period} & the period time, ms \\
\hline
{\em repeat} & is repeat? \\
\hline
{\em func} & the timer func \\
\hline
{\em priv} & the timer priv \\
\hline
\end{DoxyParams}


Definition at line 505 of file timer.\-c.



References tb\-\_\-event\-\_\-post(), tb\-\_\-heap\-\_\-put(), tb\-\_\-heap\-\_\-size(), and tb\-\_\-heap\-\_\-top().



Referenced by tb\-\_\-timer\-\_\-task\-\_\-post(), and tb\-\_\-timer\-\_\-task\-\_\-post\-\_\-after().

\hypertarget{timer_8c_a4f8073b204490014d962f6202292f4f1}{\index{timer.\-c@{timer.\-c}!tb\-\_\-timer\-\_\-top@{tb\-\_\-timer\-\_\-top}}
\index{tb\-\_\-timer\-\_\-top@{tb\-\_\-timer\-\_\-top}!timer.c@{timer.\-c}}
\subsubsection[{tb\-\_\-timer\-\_\-top}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-hize\-\_\-t tb\-\_\-timer\-\_\-top (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-timer\-\_\-ref\-\_\-t}}]{timer}
\end{DoxyParamCaption}
)}}\label{timer_8c_a4f8073b204490014d962f6202292f4f1}
the timer top when


\begin{DoxyParams}{Parameters}
{\em timer} & the timer\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the top when, -\/1\-: no task 
\end{DoxyReturn}


Definition at line 245 of file timer.\-c.



References tb\-\_\-heap\-\_\-size(), and tb\-\_\-heap\-\_\-top().

