\hypertarget{mstream_8h}{\section{src/stream/mstream.h File Reference}
\label{mstream_8h}\index{src/stream/mstream.\-h@{src/stream/mstream.\-h}}
}
{\ttfamily \#include \char`\"{}prefix.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tstream.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../asio/asio.\-h\char`\"{}}\\*
Include dependency graph for mstream.\-h\-:
This graph shows which files directly or indirectly include this file\-:
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
tb\-\_\-handle\-\_\-t \hyperlink{mstream_8h_afc6f672db57b14b9da73055394c27a90}{tb\-\_\-mstream\-\_\-init} (\hyperlink{structtb__aicp__t}{tb\-\_\-aicp\-\_\-t} $\ast$aicp, tb\-\_\-size\-\_\-t conc, tb\-\_\-long\-\_\-t timeout)
\item 
tb\-\_\-void\-\_\-t \hyperlink{mstream_8h_a6656045b4d8f0178169dd04d6b0a3ee3}{tb\-\_\-mstream\-\_\-exit} (tb\-\_\-handle\-\_\-t mstream)
\item 
tb\-\_\-void\-\_\-t \hyperlink{mstream_8h_a77ffcefa365881ec583553fd8783cda6}{tb\-\_\-mstream\-\_\-kill} (tb\-\_\-handle\-\_\-t mstream)
\item 
tb\-\_\-size\-\_\-t \hyperlink{mstream_8h_aaae1bf27e0e3f5643f787eac24aab6b8}{tb\-\_\-mstream\-\_\-size} (tb\-\_\-handle\-\_\-t mstream)
\item 
tb\-\_\-bool\-\_\-t \hyperlink{mstream_8h_ac781d725b1d17b43ef9bb775104d8fd4}{tb\-\_\-mstream\-\_\-done} (tb\-\_\-handle\-\_\-t mstream, tb\-\_\-char\-\_\-t const $\ast$iurl, tb\-\_\-char\-\_\-t const $\ast$ourl, tb\-\_\-hize\-\_\-t offset, \hyperlink{tstream_8h_ad82a3540981e77c43038a00caf0d5354}{tb\-\_\-tstream\-\_\-save\-\_\-func\-\_\-t} func, tb\-\_\-pointer\-\_\-t priv)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The Treasure Box Library

T\-Box is free software; you can redistribute it and/or modify it under the terms of the G\-N\-U Lesser General Public License as published by the Free Software Foundation; either version 2.\-1 of the License, or (at your option) any later version.

T\-Box is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U Lesser General Public License for more details.

You should have received a copy of the G\-N\-U Lesser General Public License along with T\-Box; If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}

Copyright (C) 2009 -\/ 2015, ruki All rights reserved.

\begin{DoxyAuthor}{Author}
ruki 
\end{DoxyAuthor}


Definition in file \hyperlink{mstream_8h_source}{mstream.\-h}.



\subsection{Function Documentation}
\hypertarget{mstream_8h_ac781d725b1d17b43ef9bb775104d8fd4}{\index{mstream.\-h@{mstream.\-h}!tb\-\_\-mstream\-\_\-done@{tb\-\_\-mstream\-\_\-done}}
\index{tb\-\_\-mstream\-\_\-done@{tb\-\_\-mstream\-\_\-done}!mstream.h@{mstream.\-h}}
\subsubsection[{tb\-\_\-mstream\-\_\-done}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-bool\-\_\-t tb\-\_\-mstream\-\_\-done (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{mstream, }
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{iurl, }
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{ourl, }
\item[{tb\-\_\-hize\-\_\-t}]{offset, }
\item[{{\bf tb\-\_\-tstream\-\_\-save\-\_\-func\-\_\-t}}]{func, }
\item[{tb\-\_\-pointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{mstream_8h_ac781d725b1d17b43ef9bb775104d8fd4}
done transfer from iurl to ourl


\begin{DoxyParams}{Parameters}
{\em mstream} & the mstream \\
\hline
{\em iurl} & the input url \\
\hline
{\em ourl} & the output url \\
\hline
{\em offset} & the offset \\
\hline
{\em func} & the save func \\
\hline
{\em priv} & the func private data\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tb\-\_\-true or tb\-\_\-false 
\end{DoxyReturn}


Definition at line 472 of file mstream.\-c.



References tb\-\_\-dlist\-\_\-insert\-\_\-tail(), tb\-\_\-dlist\-\_\-remove(), tb\-\_\-dlist\-\_\-size(), tb\-\_\-item\-\_\-func\-\_\-ptr(), tb\-\_\-iterator\-\_\-tail(), tb\-\_\-rpool\-\_\-malloc0(), tb\-\_\-slist\-\_\-init(), tb\-\_\-slist\-\_\-insert\-\_\-tail(), tb\-\_\-slist\-\_\-size(), tb\-\_\-thread\-\_\-init(), tb\-\_\-tstream\-\_\-init\-\_\-uu(), tb\-\_\-tstream\-\_\-osave(), and tb\-\_\-tstream\-\_\-timeout\-\_\-set().

\hypertarget{mstream_8h_a6656045b4d8f0178169dd04d6b0a3ee3}{\index{mstream.\-h@{mstream.\-h}!tb\-\_\-mstream\-\_\-exit@{tb\-\_\-mstream\-\_\-exit}}
\index{tb\-\_\-mstream\-\_\-exit@{tb\-\_\-mstream\-\_\-exit}!mstream.h@{mstream.\-h}}
\subsubsection[{tb\-\_\-mstream\-\_\-exit}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-mstream\-\_\-exit (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{mstream}
\end{DoxyParamCaption}
)}}\label{mstream_8h_a6656045b4d8f0178169dd04d6b0a3ee3}
exit mstream


\begin{DoxyParams}{Parameters}
{\em mstream} & the mstream \\
\hline
\end{DoxyParams}


Definition at line 358 of file mstream.\-c.



References tb\-\_\-aicp\-\_\-exit(), tb\-\_\-aicp\-\_\-kill(), tb\-\_\-dlist\-\_\-exit(), tb\-\_\-dlist\-\_\-size(), tb\-\_\-mstream\-\_\-kill(), tb\-\_\-rpool\-\_\-exit(), tb\-\_\-slist\-\_\-exit(), tb\-\_\-thread\-\_\-exit(), tb\-\_\-thread\-\_\-kill(), tb\-\_\-thread\-\_\-wait(), and tb\-\_\-walk\-\_\-all().



Referenced by tb\-\_\-mstream\-\_\-init().

\hypertarget{mstream_8h_afc6f672db57b14b9da73055394c27a90}{\index{mstream.\-h@{mstream.\-h}!tb\-\_\-mstream\-\_\-init@{tb\-\_\-mstream\-\_\-init}}
\index{tb\-\_\-mstream\-\_\-init@{tb\-\_\-mstream\-\_\-init}!mstream.h@{mstream.\-h}}
\subsubsection[{tb\-\_\-mstream\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-handle\-\_\-t tb\-\_\-mstream\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-aicp\-\_\-t} $\ast$}]{aicp, }
\item[{tb\-\_\-size\-\_\-t}]{conc, }
\item[{tb\-\_\-long\-\_\-t}]{timeout}
\end{DoxyParamCaption}
)}}\label{mstream_8h_afc6f672db57b14b9da73055394c27a90}
init mstream

the multi-\/stream for the stream transfer


\begin{DoxyParams}{Parameters}
{\em aicp} & the aicp, will make it if be null \\
\hline
{\em conc} & the concurrent transfer count, no limit if be zero \\
\hline
{\em timeout} & the timeout, using the default timeout if be zero\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the mstream 
\end{DoxyReturn}


Definition at line 272 of file mstream.\-c.



References tb\-\_\-aicp\-\_\-init(), tb\-\_\-dlist\-\_\-init(), tb\-\_\-item\-\_\-func\-\_\-ptr(), tb\-\_\-mstream\-\_\-exit(), and tb\-\_\-rpool\-\_\-init().

\hypertarget{mstream_8h_a77ffcefa365881ec583553fd8783cda6}{\index{mstream.\-h@{mstream.\-h}!tb\-\_\-mstream\-\_\-kill@{tb\-\_\-mstream\-\_\-kill}}
\index{tb\-\_\-mstream\-\_\-kill@{tb\-\_\-mstream\-\_\-kill}!mstream.h@{mstream.\-h}}
\subsubsection[{tb\-\_\-mstream\-\_\-kill}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-mstream\-\_\-kill (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{mstream}
\end{DoxyParamCaption}
)}}\label{mstream_8h_a77ffcefa365881ec583553fd8783cda6}
kill mstream


\begin{DoxyParams}{Parameters}
{\em mstream} & the mstream \\
\hline
\end{DoxyParams}


Definition at line 321 of file mstream.\-c.



References tb\-\_\-dlist\-\_\-exit(), tb\-\_\-dlist\-\_\-init(), tb\-\_\-dlist\-\_\-size(), tb\-\_\-item\-\_\-func\-\_\-ptr(), and tb\-\_\-walk\-\_\-all().



Referenced by tb\-\_\-mstream\-\_\-exit().

\hypertarget{mstream_8h_aaae1bf27e0e3f5643f787eac24aab6b8}{\index{mstream.\-h@{mstream.\-h}!tb\-\_\-mstream\-\_\-size@{tb\-\_\-mstream\-\_\-size}}
\index{tb\-\_\-mstream\-\_\-size@{tb\-\_\-mstream\-\_\-size}!mstream.h@{mstream.\-h}}
\subsubsection[{tb\-\_\-mstream\-\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-size\-\_\-t tb\-\_\-mstream\-\_\-size (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{mstream}
\end{DoxyParamCaption}
)}}\label{mstream_8h_aaae1bf27e0e3f5643f787eac24aab6b8}
the mstream size


\begin{DoxyParams}{Parameters}
{\em mstream} & the mstream \\
\hline
\end{DoxyParams}


Definition at line 454 of file mstream.\-c.



References tb\-\_\-rpool\-\_\-size().

