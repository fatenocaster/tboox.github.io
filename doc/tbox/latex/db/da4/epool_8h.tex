\hypertarget{epool_8h}{\section{src/platform/epool.h File Reference}
\label{epool_8h}\index{src/platform/epool.\-h@{src/platform/epool.\-h}}
}
{\ttfamily \#include \char`\"{}prefix.\-h\char`\"{}}\\*
Include dependency graph for epool.\-h\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{db/df7/epool_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d7/db2/epool_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtb__eobject__t}{tb\-\_\-eobject\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{epool_8h_a9aab7f9be4c119a308e5144e81887078}{tb\-\_\-handle\-\_\-t \hyperlink{epool_8h_a9aab7f9be4c119a308e5144e81887078}{tb\-\_\-epool\-\_\-init} (tb\-\_\-size\-\_\-t maxn)}\label{epool_8h_a9aab7f9be4c119a308e5144e81887078}

\begin{DoxyCompactList}\small\item\em init the event pool \end{DoxyCompactList}\item 
\hypertarget{epool_8h_af4722696eeea97dc3f573db042583a62}{tb\-\_\-void\-\_\-t \hyperlink{epool_8h_af4722696eeea97dc3f573db042583a62}{tb\-\_\-epool\-\_\-exit} (tb\-\_\-handle\-\_\-t epool)}\label{epool_8h_af4722696eeea97dc3f573db042583a62}

\begin{DoxyCompactList}\small\item\em exit the event pool \end{DoxyCompactList}\item 
\hypertarget{epool_8h_acfe01af7f2fe7ede87e8e083d652c9e5}{tb\-\_\-size\-\_\-t \hyperlink{epool_8h_acfe01af7f2fe7ede87e8e083d652c9e5}{tb\-\_\-epool\-\_\-maxn} (tb\-\_\-handle\-\_\-t epool)}\label{epool_8h_acfe01af7f2fe7ede87e8e083d652c9e5}

\begin{DoxyCompactList}\small\item\em the object maximum number of the event pool \end{DoxyCompactList}\item 
\hypertarget{epool_8h_a0c782364b57e6e97d57eb2156ad5e666}{tb\-\_\-size\-\_\-t \hyperlink{epool_8h_a0c782364b57e6e97d57eb2156ad5e666}{tb\-\_\-epool\-\_\-size} (tb\-\_\-handle\-\_\-t epool)}\label{epool_8h_a0c782364b57e6e97d57eb2156ad5e666}

\begin{DoxyCompactList}\small\item\em the object number of the event pool \end{DoxyCompactList}\item 
tb\-\_\-handle\-\_\-t \hyperlink{epool_8h_a844d2002b3827b311028d8ccf1d3a471}{tb\-\_\-epool\-\_\-adde} (tb\-\_\-handle\-\_\-t epool, tb\-\_\-pointer\-\_\-t edata)
\item 
tb\-\_\-void\-\_\-t \hyperlink{epool_8h_aba21fd42cc05d58c0499b8d2915e8eea}{tb\-\_\-epool\-\_\-dele} (tb\-\_\-handle\-\_\-t epool, tb\-\_\-handle\-\_\-t event)
\item 
tb\-\_\-void\-\_\-t \hyperlink{epool_8h_a774cd62ca279cf0b51a0cb6274bb4195}{tb\-\_\-epool\-\_\-post} (tb\-\_\-handle\-\_\-t epool, tb\-\_\-handle\-\_\-t event)
\item 
tb\-\_\-void\-\_\-t \hyperlink{epool_8h_a39def45b47b6fefe2d05eece31f19fd6}{tb\-\_\-epool\-\_\-kill} (tb\-\_\-handle\-\_\-t epool)
\item 
tb\-\_\-long\-\_\-t \hyperlink{epool_8h_ac33134fc21970ec51a17dc55a081b0b6}{tb\-\_\-epool\-\_\-wait} (tb\-\_\-handle\-\_\-t epool, \hyperlink{structtb__eobject__t}{tb\-\_\-eobject\-\_\-t} $\ast$objs, tb\-\_\-size\-\_\-t maxn, tb\-\_\-long\-\_\-t timeout)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The Treasure Box Library

T\-Box is free software; you can redistribute it and/or modify it under the terms of the G\-N\-U Lesser General Public License as published by the Free Software Foundation; either version 2.\-1 of the License, or (at your option) any later version.

T\-Box is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U Lesser General Public License for more details.

You should have received a copy of the G\-N\-U Lesser General Public License along with T\-Box; If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}

Copyright (C) 2009 -\/ 2015, ruki All rights reserved.

\begin{DoxyAuthor}{Author}
ruki 
\end{DoxyAuthor}


Definition in file \hyperlink{epool_8h_source}{epool.\-h}.



\subsection{Function Documentation}
\hypertarget{epool_8h_a844d2002b3827b311028d8ccf1d3a471}{\index{epool.\-h@{epool.\-h}!tb\-\_\-epool\-\_\-adde@{tb\-\_\-epool\-\_\-adde}}
\index{tb\-\_\-epool\-\_\-adde@{tb\-\_\-epool\-\_\-adde}!epool.h@{epool.\-h}}
\subsubsection[{tb\-\_\-epool\-\_\-adde}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-handle\-\_\-t tb\-\_\-epool\-\_\-adde (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{epool, }
\item[{tb\-\_\-pointer\-\_\-t}]{edata}
\end{DoxyParamCaption}
)}}\label{epool_8h_a844d2002b3827b311028d8ccf1d3a471}
add the event object


\begin{DoxyParams}{Parameters}
{\em epool} & the event pool \\
\hline
{\em edata} & the event data\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of the objects, return 0 if failed 
\end{DoxyReturn}


Definition at line 170 of file epool.\-c.



References tb\-\_\-dlist\-\_\-insert\-\_\-tail(), and tb\-\_\-dlist\-\_\-size().

\hypertarget{epool_8h_aba21fd42cc05d58c0499b8d2915e8eea}{\index{epool.\-h@{epool.\-h}!tb\-\_\-epool\-\_\-dele@{tb\-\_\-epool\-\_\-dele}}
\index{tb\-\_\-epool\-\_\-dele@{tb\-\_\-epool\-\_\-dele}!epool.h@{epool.\-h}}
\subsubsection[{tb\-\_\-epool\-\_\-dele}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-epool\-\_\-dele (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{epool, }
\item[{tb\-\_\-handle\-\_\-t}]{event}
\end{DoxyParamCaption}
)}}\label{epool_8h_aba21fd42cc05d58c0499b8d2915e8eea}
del the event object


\begin{DoxyParams}{Parameters}
{\em epool} & the event pool \\
\hline
{\em event} & the event object \\
\hline
\end{DoxyParams}


Definition at line 199 of file epool.\-c.



References tb\-\_\-dlist\-\_\-remove(), tb\-\_\-dlist\-\_\-size(), and tb\-\_\-epool\-\_\-post().

\hypertarget{epool_8h_a39def45b47b6fefe2d05eece31f19fd6}{\index{epool.\-h@{epool.\-h}!tb\-\_\-epool\-\_\-kill@{tb\-\_\-epool\-\_\-kill}}
\index{tb\-\_\-epool\-\_\-kill@{tb\-\_\-epool\-\_\-kill}!epool.h@{epool.\-h}}
\subsubsection[{tb\-\_\-epool\-\_\-kill}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-epool\-\_\-kill (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{epool}
\end{DoxyParamCaption}
)}}\label{epool_8h_a39def45b47b6fefe2d05eece31f19fd6}
post the all events signal


\begin{DoxyParams}{Parameters}
{\em epool} & the event pool \\
\hline
{\em event} & the event object \\
\hline
\end{DoxyParams}


Definition at line 248 of file epool.\-c.



References tb\-\_\-event\-\_\-post(), and tb\-\_\-for\-\_\-all.



Referenced by tb\-\_\-epool\-\_\-exit().

\hypertarget{epool_8h_a774cd62ca279cf0b51a0cb6274bb4195}{\index{epool.\-h@{epool.\-h}!tb\-\_\-epool\-\_\-post@{tb\-\_\-epool\-\_\-post}}
\index{tb\-\_\-epool\-\_\-post@{tb\-\_\-epool\-\_\-post}!epool.h@{epool.\-h}}
\subsubsection[{tb\-\_\-epool\-\_\-post}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-epool\-\_\-post (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{epool, }
\item[{tb\-\_\-handle\-\_\-t}]{event}
\end{DoxyParamCaption}
)}}\label{epool_8h_a774cd62ca279cf0b51a0cb6274bb4195}
post the event


\begin{DoxyParams}{Parameters}
{\em epool} & the event pool \\
\hline
{\em event} & the event object \\
\hline
\end{DoxyParams}


Definition at line 221 of file epool.\-c.



References tb\-\_\-dlist\-\_\-size(), tb\-\_\-event\-\_\-post(), and tb\-\_\-iterator\-\_\-item().



Referenced by tb\-\_\-epool\-\_\-dele().

\hypertarget{epool_8h_ac33134fc21970ec51a17dc55a081b0b6}{\index{epool.\-h@{epool.\-h}!tb\-\_\-epool\-\_\-wait@{tb\-\_\-epool\-\_\-wait}}
\index{tb\-\_\-epool\-\_\-wait@{tb\-\_\-epool\-\_\-wait}!epool.h@{epool.\-h}}
\subsubsection[{tb\-\_\-epool\-\_\-wait}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-long\-\_\-t tb\-\_\-epool\-\_\-wait (
\begin{DoxyParamCaption}
\item[{tb\-\_\-handle\-\_\-t}]{epool, }
\item[{{\bf tb\-\_\-eobject\-\_\-t} $\ast$}]{objs, }
\item[{tb\-\_\-size\-\_\-t}]{maxn, }
\item[{tb\-\_\-long\-\_\-t}]{timeout}
\end{DoxyParamCaption}
)}}\label{epool_8h_ac33134fc21970ec51a17dc55a081b0b6}
wait the event objects in the pool

blocking wait the multiple event objects return the event number if ok, otherwise return 0 for timeout


\begin{DoxyParams}{Parameters}
{\em epool} & the event pool \\
\hline
{\em objs} & the returned event objects \\
\hline
{\em maxn} & the maximum number of the returned event objects \\
\hline
{\em epool} & the event pool \\
\hline
{\em timeout} & the timeout value, return immediately if 0, infinity if -\/1\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the event number, return 0 if timeout, return -\/1 if error 
\end{DoxyReturn}


Definition at line 277 of file epool.\-c.



References tb\-\_\-event\-\_\-wait(), tb\-\_\-iterator\-\_\-head(), tb\-\_\-iterator\-\_\-item(), tb\-\_\-iterator\-\_\-next(), and tb\-\_\-iterator\-\_\-tail().

