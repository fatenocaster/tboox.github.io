\hypertarget{thread__pool_8c}{\section{src/tbox/platform/thread\-\_\-pool.c File Reference}
\label{thread__pool_8c}\index{src/tbox/platform/thread\-\_\-pool.\-c@{src/tbox/platform/thread\-\_\-pool.\-c}}
}
{\ttfamily \#include \char`\"{}platform.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../utils/utils.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../memory/memory.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../container/container.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../algorithm/algorithm.\-h\char`\"{}}\\*
Include dependency graph for thread\-\_\-pool.\-c\-:
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{thread__pool_8c_a2aa61763aba311653f75dfdea928da4e}{\#define {\bfseries T\-B\-\_\-\-T\-R\-A\-C\-E\-\_\-\-M\-O\-D\-U\-L\-E\-\_\-\-N\-A\-M\-E}~\char`\"{}thread\-\_\-pool\char`\"{}}\label{thread__pool_8c_a2aa61763aba311653f75dfdea928da4e}

\item 
\hypertarget{thread__pool_8c_ab5dd5585b246c36fdb275f9781170000}{\#define {\bfseries T\-B\-\_\-\-T\-R\-A\-C\-E\-\_\-\-M\-O\-D\-U\-L\-E\-\_\-\-D\-E\-B\-U\-G}~(1)}\label{thread__pool_8c_ab5dd5585b246c36fdb275f9781170000}

\item 
\hypertarget{thread__pool_8c_ae14ec00dd265b366b5b32b70d6f2a731}{\#define {\bfseries T\-B\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-P\-O\-O\-L\-\_\-\-W\-O\-R\-K\-E\-R\-\_\-\-M\-A\-X\-N}~(64)}\label{thread__pool_8c_ae14ec00dd265b366b5b32b70d6f2a731}

\item 
\hypertarget{thread__pool_8c_a027a6a4495312f05c33f8b0aa68280ea}{\#define {\bfseries T\-B\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-P\-O\-O\-L\-\_\-\-J\-O\-B\-S\-\_\-\-P\-O\-O\-L\-\_\-\-G\-R\-O\-W}~(512)}\label{thread__pool_8c_a027a6a4495312f05c33f8b0aa68280ea}

\item 
\hypertarget{thread__pool_8c_a9caa269569ae611712f2082b96e4bc42}{\#define {\bfseries T\-B\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-P\-O\-O\-L\-\_\-\-J\-O\-B\-S\-\_\-\-W\-O\-R\-K\-I\-N\-G\-\_\-\-G\-R\-O\-W}~(64)}\label{thread__pool_8c_a9caa269569ae611712f2082b96e4bc42}

\item 
\hypertarget{thread__pool_8c_a51c90cf722c7d203f76aea5d80f6628c}{\#define {\bfseries T\-B\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-P\-O\-O\-L\-\_\-\-J\-O\-B\-S\-\_\-\-W\-A\-I\-T\-I\-N\-G\-\_\-\-M\-A\-X\-N}~(1 $<$$<$ 20)}\label{thread__pool_8c_a51c90cf722c7d203f76aea5d80f6628c}

\item 
\hypertarget{thread__pool_8c_a0c97b0db3f1c50a0412b005247036d04}{\#define {\bfseries T\-B\-\_\-\-T\-H\-R\-E\-A\-D\-\_\-\-P\-O\-O\-L\-\_\-\-J\-O\-B\-S\-\_\-\-P\-U\-L\-L\-\_\-\-T\-I\-M\-E\-\_\-\-M\-A\-X\-N}~(20000)}\label{thread__pool_8c_a0c97b0db3f1c50a0412b005247036d04}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{thread__pool_8c_a20f5f51ed501212772a164fa19d03325}{\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} {\bfseries tb\-\_\-thread\-\_\-pool} ()}\label{thread__pool_8c_a20f5f51ed501212772a164fa19d03325}

\item 
\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} \hyperlink{thread__pool_8c_ae69ff78baa552e83f30abd1b3749409d}{tb\-\_\-thread\-\_\-pool\-\_\-init} (tb\-\_\-size\-\_\-t worker\-\_\-maxn, tb\-\_\-size\-\_\-t stack)
\item 
tb\-\_\-bool\-\_\-t \hyperlink{thread__pool_8c_ac606d0cce24a04003cf54a42736a2bbb}{tb\-\_\-thread\-\_\-pool\-\_\-exit} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool)
\item 
tb\-\_\-void\-\_\-t \hyperlink{thread__pool_8c_a53277603c5898d8628bea3d177bfb02f}{tb\-\_\-thread\-\_\-pool\-\_\-kill} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool)
\item 
tb\-\_\-size\-\_\-t \hyperlink{thread__pool_8c_aaf4bc2e834672b2b23ef67d836b9da37}{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-size} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool)
\item 
tb\-\_\-void\-\_\-t \hyperlink{thread__pool_8c_ab2b8c8f6da8b71029d36614c48774c7b}{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-setp} (\hyperlink{structtb__thread__pool__worker__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-ref\-\_\-t} worker, tb\-\_\-size\-\_\-t index, \hyperlink{thread__pool_8h_a5f7c637d50676f41130dff66d5c08d12}{tb\-\_\-thread\-\_\-pool\-\_\-priv\-\_\-exit\-\_\-func\-\_\-t} exit, tb\-\_\-cpointer\-\_\-t priv)
\item 
tb\-\_\-cpointer\-\_\-t \hyperlink{thread__pool_8c_a810aabb40301bfee7e27e27e3821c9eb}{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-getp} (\hyperlink{structtb__thread__pool__worker__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-ref\-\_\-t} worker, tb\-\_\-size\-\_\-t index)
\item 
tb\-\_\-size\-\_\-t \hyperlink{thread__pool_8c_a8781832b71f9cb430fc8d8de0db199a8}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-size} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool)
\item 
tb\-\_\-bool\-\_\-t \hyperlink{thread__pool_8c_ac79d72a82e1bf7531694a6cfb316514b}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool, tb\-\_\-char\-\_\-t const $\ast$name, \hyperlink{thread__pool_8h_ab14e7bd7c70fed7b9a7793a635108840}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-done\-\_\-func\-\_\-t} done, \hyperlink{thread__pool_8h_a3f10ee86a753f7233d3258221b144fd1}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit\-\_\-func\-\_\-t} exit, tb\-\_\-cpointer\-\_\-t priv, tb\-\_\-bool\-\_\-t urgent)
\item 
tb\-\_\-size\-\_\-t \hyperlink{thread__pool_8c_adfaad022a7ed034a5ae424bfa4cfc7da}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post\-\_\-list} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool, \hyperlink{structtb__thread__pool__task__t}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t} const $\ast$list, tb\-\_\-size\-\_\-t size)
\item 
\hyperlink{structtb__thread__pool__task__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-ref\-\_\-t} \hyperlink{thread__pool_8c_a112330f10c7bac1599c315400e404ebe}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-init} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool, tb\-\_\-char\-\_\-t const $\ast$name, \hyperlink{thread__pool_8h_ab14e7bd7c70fed7b9a7793a635108840}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-done\-\_\-func\-\_\-t} done, \hyperlink{thread__pool_8h_a3f10ee86a753f7233d3258221b144fd1}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit\-\_\-func\-\_\-t} exit, tb\-\_\-cpointer\-\_\-t priv, tb\-\_\-bool\-\_\-t urgent)
\item 
tb\-\_\-void\-\_\-t \hyperlink{thread__pool_8c_aa18d50aa9f6a760072f72bc247661ff2}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool, \hyperlink{structtb__thread__pool__task__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-ref\-\_\-t} task)
\item 
tb\-\_\-void\-\_\-t \hyperlink{thread__pool_8c_a6c1dc465bcc4e03b845195fa8de72e3d}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill\-\_\-all} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool)
\item 
tb\-\_\-long\-\_\-t \hyperlink{thread__pool_8c_ae67ab7e2ab7b0dea818126111503d438}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool, \hyperlink{structtb__thread__pool__task__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-ref\-\_\-t} task, tb\-\_\-long\-\_\-t timeout)
\item 
tb\-\_\-long\-\_\-t \hyperlink{thread__pool_8c_a1b3974cf23ce784426675f9164d4a986}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait\-\_\-all} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool, tb\-\_\-long\-\_\-t timeout)
\item 
tb\-\_\-void\-\_\-t \hyperlink{thread__pool_8c_aeb9587e88d09b35baa5d0f7aa124e031}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit} (\hyperlink{structtb__thread__pool__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} pool, \hyperlink{structtb__thread__pool__task__ref__t}{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-ref\-\_\-t} task)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The Treasure Box Library

T\-Box is free software; you can redistribute it and/or modify it under the terms of the G\-N\-U Lesser General Public License as published by the Free Software Foundation; either version 2.\-1 of the License, or (at your option) any later version.

T\-Box is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U Lesser General Public License for more details.

You should have received a copy of the G\-N\-U Lesser General Public License along with T\-Box; If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}

Copyright (C) 2009 -\/ 2015, ruki All rights reserved.

\begin{DoxyAuthor}{Author}
ruki 
\end{DoxyAuthor}


Definition in file \hyperlink{thread__pool_8c_source}{thread\-\_\-pool.\-c}.



\subsection{Function Documentation}
\hypertarget{thread__pool_8c_ac606d0cce24a04003cf54a42736a2bbb}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-exit@{tb\-\_\-thread\-\_\-pool\-\_\-exit}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-exit@{tb\-\_\-thread\-\_\-pool\-\_\-exit}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-exit}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-bool\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-exit (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_ac606d0cce24a04003cf54a42736a2bbb}
exit thread pool


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tb\-\_\-true or tb\-\_\-false 
\end{DoxyReturn}


Definition at line 815 of file thread\-\_\-pool.\-c.



References tb\-\_\-fixed\-\_\-pool\-\_\-exit(), tb\-\_\-list\-\_\-entry\-\_\-exit(), tb\-\_\-semaphore\-\_\-exit(), tb\-\_\-thread\-\_\-exit(), tb\-\_\-thread\-\_\-pool\-\_\-kill(), tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait\-\_\-all(), and tb\-\_\-thread\-\_\-wait().



Referenced by tb\-\_\-thread\-\_\-pool\-\_\-init().

\hypertarget{thread__pool_8c_ae69ff78baa552e83f30abd1b3749409d}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-init@{tb\-\_\-thread\-\_\-pool\-\_\-init}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-init@{tb\-\_\-thread\-\_\-pool\-\_\-init}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t} tb\-\_\-thread\-\_\-pool\-\_\-init (
\begin{DoxyParamCaption}
\item[{tb\-\_\-size\-\_\-t}]{worker\-\_\-maxn, }
\item[{tb\-\_\-size\-\_\-t}]{stack}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_ae69ff78baa552e83f30abd1b3749409d}
init thread pool


\begin{DoxyParams}{Parameters}
{\em worker\-\_\-maxn} & the thread worker max count, using the default count \\
\hline
{\em stack} & the thread stack, using the default stack size if be zero\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the thread pool 
\end{DoxyReturn}


Definition at line 752 of file thread\-\_\-pool.\-c.



References tb\-\_\-fixed\-\_\-pool\-\_\-init(), tb\-\_\-list\-\_\-entry\-\_\-init, tb\-\_\-lock\-\_\-profiler(), tb\-\_\-lock\-\_\-profiler\-\_\-register(), tb\-\_\-processor\-\_\-count(), tb\-\_\-semaphore\-\_\-init(), and tb\-\_\-thread\-\_\-pool\-\_\-exit().

\hypertarget{thread__pool_8c_a53277603c5898d8628bea3d177bfb02f}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-kill@{tb\-\_\-thread\-\_\-pool\-\_\-kill}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-kill@{tb\-\_\-thread\-\_\-pool\-\_\-kill}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-kill}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-kill (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_a53277603c5898d8628bea3d177bfb02f}
kill thread pool, all workers and waiting tasks


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool \\
\hline
\end{DoxyParams}


Definition at line 898 of file thread\-\_\-pool.\-c.



References tb\-\_\-fixed\-\_\-pool\-\_\-walk().



Referenced by tb\-\_\-thread\-\_\-pool\-\_\-exit().

\hypertarget{thread__pool_8c_aeb9587e88d09b35baa5d0f7aa124e031}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool, }
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-ref\-\_\-t}}]{task}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_aeb9587e88d09b35baa5d0f7aa124e031}
exit the task


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool \\
\hline
{\em task} & the thread pool task \\
\hline
\end{DoxyParams}


Definition at line 1214 of file thread\-\_\-pool.\-c.



References tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill().

\hypertarget{thread__pool_8c_a112330f10c7bac1599c315400e404ebe}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-init@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-init}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-init@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-init}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-ref\-\_\-t} tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-init (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool, }
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{name, }
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-done\-\_\-func\-\_\-t}}]{done, }
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit\-\_\-func\-\_\-t}}]{exit, }
\item[{tb\-\_\-cpointer\-\_\-t}]{priv, }
\item[{tb\-\_\-bool\-\_\-t}]{urgent}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_a112330f10c7bac1599c315400e404ebe}
init one task


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool \\
\hline
{\em name} & the task name, optional \\
\hline
{\em done} & the task done func \\
\hline
{\em exit} & the task exit func, optional \\
\hline
{\em priv} & the task private data \\
\hline
{\em urgent} & is urgent task?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the thread pool task 
\end{DoxyReturn}


Definition at line 1068 of file thread\-\_\-pool.\-c.



References tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::done, tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::exit, tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::name, tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::priv, and tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::urgent.

\hypertarget{thread__pool_8c_aa18d50aa9f6a760072f72bc247661ff2}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool, }
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-ref\-\_\-t}}]{task}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_aa18d50aa9f6a760072f72bc247661ff2}
kill the waiting task


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool \\
\hline
{\em task} & the task handle \\
\hline
\end{DoxyParams}


Definition at line 1119 of file thread\-\_\-pool.\-c.



References tb\-\_\-state\-\_\-cstr().



Referenced by tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit().

\hypertarget{thread__pool_8c_a6c1dc465bcc4e03b845195fa8de72e3d}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill\-\_\-all@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill\-\_\-all}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill\-\_\-all@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill\-\_\-all}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill\-\_\-all}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-kill\-\_\-all (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_a6c1dc465bcc4e03b845195fa8de72e3d}
kill all waiting tasks


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool \\
\hline
\end{DoxyParams}


Definition at line 1131 of file thread\-\_\-pool.\-c.



References tb\-\_\-fixed\-\_\-pool\-\_\-walk().

\hypertarget{thread__pool_8c_ac79d72a82e1bf7531694a6cfb316514b}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-bool\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool, }
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{name, }
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-done\-\_\-func\-\_\-t}}]{done, }
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-exit\-\_\-func\-\_\-t}}]{exit, }
\item[{tb\-\_\-cpointer\-\_\-t}]{priv, }
\item[{tb\-\_\-bool\-\_\-t}]{urgent}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_ac79d72a82e1bf7531694a6cfb316514b}
post one task


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool \\
\hline
{\em name} & the task name, optional \\
\hline
{\em done} & the task done func \\
\hline
{\em exit} & the task exit func, optional \\
\hline
{\em priv} & the task private data \\
\hline
{\em urgent} & is urgent task?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tb\-\_\-true or tb\-\_\-false 
\end{DoxyReturn}


Definition at line 990 of file thread\-\_\-pool.\-c.



References tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::done, tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::exit, tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::name, tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::priv, and tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t\-::urgent.

\hypertarget{thread__pool_8c_adfaad022a7ed034a5ae424bfa4cfc7da}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post\-\_\-list@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post\-\_\-list}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post\-\_\-list@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post\-\_\-list}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post\-\_\-list}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-size\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-post\-\_\-list (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool, }
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-t} const $\ast$}]{list, }
\item[{tb\-\_\-size\-\_\-t}]{size}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_adfaad022a7ed034a5ae424bfa4cfc7da}
post task list


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool \\
\hline
{\em list} & the task list \\
\hline
{\em size} & the task count\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the real posted task count 
\end{DoxyReturn}


Definition at line 1035 of file thread\-\_\-pool.\-c.

\hypertarget{thread__pool_8c_a8781832b71f9cb430fc8d8de0db199a8}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-size@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-size}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-size@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-size}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-size\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-size (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_a8781832b71f9cb430fc8d8de0db199a8}
the current waiting task count


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the current task count 
\end{DoxyReturn}


Definition at line 972 of file thread\-\_\-pool.\-c.



References tb\-\_\-fixed\-\_\-pool\-\_\-size().

\hypertarget{thread__pool_8c_ae67ab7e2ab7b0dea818126111503d438}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-long\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool, }
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-ref\-\_\-t}}]{task, }
\item[{tb\-\_\-long\-\_\-t}]{timeout}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_ae67ab7e2ab7b0dea818126111503d438}
wait one task


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool \\
\hline
{\em task} & the thread pool task \\
\hline
{\em timeout} & the timeout\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
ok\-: 1, timeout\-: 0, error\-: -\/1 
\end{DoxyReturn}


Definition at line 1147 of file thread\-\_\-pool.\-c.



References tb\-\_\-cache\-\_\-time\-\_\-spak(), and tb\-\_\-state\-\_\-cstr().

\hypertarget{thread__pool_8c_a1b3974cf23ce784426675f9164d4a986}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait\-\_\-all@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait\-\_\-all}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait\-\_\-all@{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait\-\_\-all}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait\-\_\-all}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-long\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-task\-\_\-wait\-\_\-all (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool, }
\item[{tb\-\_\-long\-\_\-t}]{timeout}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_a1b3974cf23ce784426675f9164d4a986}
wait all waiting tasks


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool \\
\hline
{\em timeout} & the timeout\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
ok\-: 1, timeout\-: 0, error\-: -\/1 
\end{DoxyReturn}


Definition at line 1170 of file thread\-\_\-pool.\-c.



References tb\-\_\-cache\-\_\-time\-\_\-spak(), tb\-\_\-fixed\-\_\-pool\-\_\-size(), tb\-\_\-for\-\_\-all\-\_\-if, tb\-\_\-list\-\_\-entry\-\_\-itor(), and tb\-\_\-state\-\_\-cstr().



Referenced by tb\-\_\-thread\-\_\-pool\-\_\-exit().

\hypertarget{thread__pool_8c_a810aabb40301bfee7e27e27e3821c9eb}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-getp@{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-getp}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-getp@{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-getp}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-getp}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-cpointer\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-getp (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-ref\-\_\-t}}]{worker, }
\item[{tb\-\_\-size\-\_\-t}]{index}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_a810aabb40301bfee7e27e27e3821c9eb}
get the worker private data


\begin{DoxyParams}{Parameters}
{\em worker} & the thread pool worker \\
\hline
{\em index} & the private data index\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the private data 
\end{DoxyReturn}


Definition at line 963 of file thread\-\_\-pool.\-c.

\hypertarget{thread__pool_8c_ab2b8c8f6da8b71029d36614c48774c7b}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-setp@{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-setp}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-setp@{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-setp}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-setp}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-setp (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-ref\-\_\-t}}]{worker, }
\item[{tb\-\_\-size\-\_\-t}]{index, }
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-priv\-\_\-exit\-\_\-func\-\_\-t}}]{exit, }
\item[{tb\-\_\-cpointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_ab2b8c8f6da8b71029d36614c48774c7b}
set the worker private data


\begin{DoxyParams}{Parameters}
{\em worker} & the thread pool worker \\
\hline
{\em index} & the private data index \\
\hline
{\em exit} & the private data exit func \\
\hline
{\em priv} & the private data \\
\hline
\end{DoxyParams}


Definition at line 953 of file thread\-\_\-pool.\-c.

\hypertarget{thread__pool_8c_aaf4bc2e834672b2b23ef67d836b9da37}{\index{thread\-\_\-pool.\-c@{thread\-\_\-pool.\-c}!tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-size@{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-size}}
\index{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-size@{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-size}!thread_pool.c@{thread\-\_\-pool.\-c}}
\subsubsection[{tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-size\-\_\-t tb\-\_\-thread\-\_\-pool\-\_\-worker\-\_\-size (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-thread\-\_\-pool\-\_\-ref\-\_\-t}}]{pool}
\end{DoxyParamCaption}
)}}\label{thread__pool_8c_aaf4bc2e834672b2b23ef67d836b9da37}
the current worker count


\begin{DoxyParams}{Parameters}
{\em pool} & the thread pool\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the current worker count 
\end{DoxyReturn}


Definition at line 935 of file thread\-\_\-pool.\-c.

