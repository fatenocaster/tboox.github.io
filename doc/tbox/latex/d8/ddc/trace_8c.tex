\hypertarget{trace_8c}{\section{src/tbox/utils/trace.c File Reference}
\label{trace_8c}\index{src/tbox/utils/trace.\-c@{src/tbox/utils/trace.\-c}}
}
{\ttfamily \#include \char`\"{}trace.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../libc/libc.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../platform/platform.\-h\char`\"{}}\\*
Include dependency graph for trace.\-c\-:
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{trace_8c_a662491c6f313682f089e47e36f11ade9}{\#define {\bfseries T\-B\-\_\-\-T\-R\-A\-C\-E\-\_\-\-L\-I\-N\-E\-\_\-\-M\-A\-X\-N}~(8192 $<$$<$ 1)}\label{trace_8c_a662491c6f313682f089e47e36f11ade9}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{trace_8c_abaca7fd145f9f7a51e7b45cd443a8cd3}{tb\-\_\-bool\-\_\-t {\bfseries tb\-\_\-trace\-\_\-init} ()}\label{trace_8c_abaca7fd145f9f7a51e7b45cd443a8cd3}

\item 
\hypertarget{trace_8c_a98fb1e474a0d3608d8a00111c4ea6cb7}{tb\-\_\-void\-\_\-t {\bfseries tb\-\_\-trace\-\_\-exit} ()}\label{trace_8c_a98fb1e474a0d3608d8a00111c4ea6cb7}

\item 
\hypertarget{trace_8c_a091f393ba5fb9d936ab1d6ce837da51a}{tb\-\_\-size\-\_\-t {\bfseries tb\-\_\-trace\-\_\-mode} ()}\label{trace_8c_a091f393ba5fb9d936ab1d6ce837da51a}

\item 
tb\-\_\-bool\-\_\-t \hyperlink{trace_8c_aba92940d01ff4c57459ea1c52adaf0b0}{tb\-\_\-trace\-\_\-mode\-\_\-set} (tb\-\_\-size\-\_\-t mode)
\item 
\hypertarget{trace_8c_a8c22eac84e9d6c49d4f5d2523bd9beb4}{tb\-\_\-handle\-\_\-t {\bfseries tb\-\_\-trace\-\_\-file} ()}\label{trace_8c_a8c22eac84e9d6c49d4f5d2523bd9beb4}

\item 
tb\-\_\-bool\-\_\-t \hyperlink{trace_8c_a4aebfc928a391b75c719a5f1fd57c0b0}{tb\-\_\-trace\-\_\-file\-\_\-set} (\hyperlink{structtb__file__ref__t}{tb\-\_\-file\-\_\-ref\-\_\-t} file)
\item 
tb\-\_\-bool\-\_\-t \hyperlink{trace_8c_a248f62d3c9a1e6467a0ed199575f898f}{tb\-\_\-trace\-\_\-file\-\_\-set\-\_\-path} (tb\-\_\-char\-\_\-t const $\ast$path, tb\-\_\-bool\-\_\-t bappend)
\item 
tb\-\_\-void\-\_\-t \hyperlink{trace_8c_a0fe5c9f99a8202172c95e4be58b13c6b}{tb\-\_\-trace\-\_\-done\-\_\-with\-\_\-args} (tb\-\_\-char\-\_\-t const $\ast$prefix, tb\-\_\-char\-\_\-t const $\ast$module, tb\-\_\-char\-\_\-t const $\ast$format, tb\-\_\-va\-\_\-list\-\_\-t args)
\item 
tb\-\_\-void\-\_\-t \hyperlink{trace_8c_ad2e51447ffaec8a3e6b139f9965bc060}{tb\-\_\-trace\-\_\-done} (tb\-\_\-char\-\_\-t const $\ast$prefix, tb\-\_\-char\-\_\-t const $\ast$module, tb\-\_\-char\-\_\-t const $\ast$format,...)
\item 
tb\-\_\-void\-\_\-t \hyperlink{trace_8c_a208da82e00940457d7927f12559eef5c}{tb\-\_\-trace\-\_\-tail} (tb\-\_\-char\-\_\-t const $\ast$format,...)
\item 
\hypertarget{trace_8c_afad8560bc45a3202f43ab182cf399dab}{tb\-\_\-void\-\_\-t {\bfseries tb\-\_\-trace\-\_\-sync} ()}\label{trace_8c_afad8560bc45a3202f43ab182cf399dab}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
The Treasure Box Library

T\-Box is free software; you can redistribute it and/or modify it under the terms of the G\-N\-U Lesser General Public License as published by the Free Software Foundation; either version 2.\-1 of the License, or (at your option) any later version.

T\-Box is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U Lesser General Public License for more details.

You should have received a copy of the G\-N\-U Lesser General Public License along with T\-Box; If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}

Copyright (C) 2009 -\/ 2015, ruki All rights reserved.

\begin{DoxyAuthor}{Author}
ruki 
\end{DoxyAuthor}


Definition in file \hyperlink{trace_8c_source}{trace.\-c}.



\subsection{Function Documentation}
\hypertarget{trace_8c_ad2e51447ffaec8a3e6b139f9965bc060}{\index{trace.\-c@{trace.\-c}!tb\-\_\-trace\-\_\-done@{tb\-\_\-trace\-\_\-done}}
\index{tb\-\_\-trace\-\_\-done@{tb\-\_\-trace\-\_\-done}!trace.c@{trace.\-c}}
\subsubsection[{tb\-\_\-trace\-\_\-done}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-trace\-\_\-done (
\begin{DoxyParamCaption}
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{prefix, }
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{module, }
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{format, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{trace_8c_ad2e51447ffaec8a3e6b139f9965bc060}
done trace


\begin{DoxyParams}{Parameters}
{\em prefix} & the trace prefix \\
\hline
{\em module} & the trace module \\
\hline
{\em format} & the trace format \\
\hline
\end{DoxyParams}


Definition at line 247 of file trace.\-c.



References tb\-\_\-trace\-\_\-done\-\_\-with\-\_\-args().

\hypertarget{trace_8c_a0fe5c9f99a8202172c95e4be58b13c6b}{\index{trace.\-c@{trace.\-c}!tb\-\_\-trace\-\_\-done\-\_\-with\-\_\-args@{tb\-\_\-trace\-\_\-done\-\_\-with\-\_\-args}}
\index{tb\-\_\-trace\-\_\-done\-\_\-with\-\_\-args@{tb\-\_\-trace\-\_\-done\-\_\-with\-\_\-args}!trace.c@{trace.\-c}}
\subsubsection[{tb\-\_\-trace\-\_\-done\-\_\-with\-\_\-args}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-trace\-\_\-done\-\_\-with\-\_\-args (
\begin{DoxyParamCaption}
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{prefix, }
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{module, }
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{format, }
\item[{tb\-\_\-va\-\_\-list\-\_\-t}]{args}
\end{DoxyParamCaption}
)}}\label{trace_8c_a0fe5c9f99a8202172c95e4be58b13c6b}
done trace with arguments


\begin{DoxyParams}{Parameters}
{\em prefix} & the trace prefix \\
\hline
{\em module} & the trace module \\
\hline
{\em format} & the trace format \\
\hline
{\em args} & the trace arguments \\
\hline
\end{DoxyParams}


Definition at line 179 of file trace.\-c.



References tb\-\_\-file\-\_\-writ(), tb\-\_\-localtime(), tb\-\_\-print(), tb\-\_\-snprintf(), tb\-\_\-thread\-\_\-self(), and tb\-\_\-vsnprintf().



Referenced by tb\-\_\-trace\-\_\-done().

\hypertarget{trace_8c_a4aebfc928a391b75c719a5f1fd57c0b0}{\index{trace.\-c@{trace.\-c}!tb\-\_\-trace\-\_\-file\-\_\-set@{tb\-\_\-trace\-\_\-file\-\_\-set}}
\index{tb\-\_\-trace\-\_\-file\-\_\-set@{tb\-\_\-trace\-\_\-file\-\_\-set}!trace.c@{trace.\-c}}
\subsubsection[{tb\-\_\-trace\-\_\-file\-\_\-set}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-bool\-\_\-t tb\-\_\-trace\-\_\-file\-\_\-set (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-file\-\_\-ref\-\_\-t}}]{file}
\end{DoxyParamCaption}
)}}\label{trace_8c_a4aebfc928a391b75c719a5f1fd57c0b0}
set the trace file


\begin{DoxyParams}{Parameters}
{\em file} & the trace file handle\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tb\-\_\-true or tb\-\_\-false 
\end{DoxyReturn}


Definition at line 134 of file trace.\-c.



References tb\-\_\-file\-\_\-exit().

\hypertarget{trace_8c_a248f62d3c9a1e6467a0ed199575f898f}{\index{trace.\-c@{trace.\-c}!tb\-\_\-trace\-\_\-file\-\_\-set\-\_\-path@{tb\-\_\-trace\-\_\-file\-\_\-set\-\_\-path}}
\index{tb\-\_\-trace\-\_\-file\-\_\-set\-\_\-path@{tb\-\_\-trace\-\_\-file\-\_\-set\-\_\-path}!trace.c@{trace.\-c}}
\subsubsection[{tb\-\_\-trace\-\_\-file\-\_\-set\-\_\-path}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-bool\-\_\-t tb\-\_\-trace\-\_\-file\-\_\-set\-\_\-path (
\begin{DoxyParamCaption}
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{path, }
\item[{tb\-\_\-bool\-\_\-t}]{bappend}
\end{DoxyParamCaption}
)}}\label{trace_8c_a248f62d3c9a1e6467a0ed199575f898f}
set the trace file path


\begin{DoxyParams}{Parameters}
{\em path} & the trace file path \\
\hline
{\em bappend} & is appended?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tb\-\_\-true or tb\-\_\-false 
\end{DoxyReturn}


Definition at line 155 of file trace.\-c.



References tb\-\_\-file\-\_\-exit(), tb\-\_\-file\-\_\-init(), T\-B\-\_\-\-F\-I\-L\-E\-\_\-\-M\-O\-D\-E\-\_\-\-A\-P\-P\-E\-N\-D, T\-B\-\_\-\-F\-I\-L\-E\-\_\-\-M\-O\-D\-E\-\_\-\-B\-I\-N\-A\-R\-Y, T\-B\-\_\-\-F\-I\-L\-E\-\_\-\-M\-O\-D\-E\-\_\-\-C\-R\-E\-A\-T, T\-B\-\_\-\-F\-I\-L\-E\-\_\-\-M\-O\-D\-E\-\_\-\-R\-W, and T\-B\-\_\-\-F\-I\-L\-E\-\_\-\-M\-O\-D\-E\-\_\-\-T\-R\-U\-N\-C.

\hypertarget{trace_8c_aba92940d01ff4c57459ea1c52adaf0b0}{\index{trace.\-c@{trace.\-c}!tb\-\_\-trace\-\_\-mode\-\_\-set@{tb\-\_\-trace\-\_\-mode\-\_\-set}}
\index{tb\-\_\-trace\-\_\-mode\-\_\-set@{tb\-\_\-trace\-\_\-mode\-\_\-set}!trace.c@{trace.\-c}}
\subsubsection[{tb\-\_\-trace\-\_\-mode\-\_\-set}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-bool\-\_\-t tb\-\_\-trace\-\_\-mode\-\_\-set (
\begin{DoxyParamCaption}
\item[{tb\-\_\-size\-\_\-t}]{mode}
\end{DoxyParamCaption}
)}}\label{trace_8c_aba92940d01ff4c57459ea1c52adaf0b0}
set the trace mode


\begin{DoxyParams}{Parameters}
{\em mode} & the trace mode\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
tb\-\_\-true or tb\-\_\-false 
\end{DoxyReturn}


Definition at line 106 of file trace.\-c.

\hypertarget{trace_8c_a208da82e00940457d7927f12559eef5c}{\index{trace.\-c@{trace.\-c}!tb\-\_\-trace\-\_\-tail@{tb\-\_\-trace\-\_\-tail}}
\index{tb\-\_\-trace\-\_\-tail@{tb\-\_\-trace\-\_\-tail}!trace.c@{trace.\-c}}
\subsubsection[{tb\-\_\-trace\-\_\-tail}]{\setlength{\rightskip}{0pt plus 5cm}tb\-\_\-void\-\_\-t tb\-\_\-trace\-\_\-tail (
\begin{DoxyParamCaption}
\item[{tb\-\_\-char\-\_\-t const $\ast$}]{format, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{trace_8c_a208da82e00940457d7927f12559eef5c}
done trace tail


\begin{DoxyParams}{Parameters}
{\em format} & the trace format \\
\hline
\end{DoxyParams}


Definition at line 262 of file trace.\-c.



References tb\-\_\-file\-\_\-writ(), tb\-\_\-print(), and tb\-\_\-vsnprintf().

