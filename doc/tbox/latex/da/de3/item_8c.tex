\hypertarget{item_8c}{\section{src/container/item.c File Reference}
\label{item_8c}\index{src/container/item.\-c@{src/container/item.\-c}}
}
{\ttfamily \#include \char`\"{}item.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../libc/libc.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../utils/utils.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../memory/memory.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../object/object.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../platform/platform.\-h\char`\"{}}\\*
Include dependency graph for item.\-c\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{d2/dd2/item_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{item_8c_a063a4351a048f0438eeb25fc75b88b4e}{\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} {\bfseries tb\-\_\-item\-\_\-func\-\_\-true} ()}\label{item_8c_a063a4351a048f0438eeb25fc75b88b4e}

\item 
\hypertarget{item_8c_ab2a273c371bcbdef2b0f622bdd48e00c}{\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} {\bfseries tb\-\_\-item\-\_\-func\-\_\-long} ()}\label{item_8c_ab2a273c371bcbdef2b0f622bdd48e00c}

\item 
\hypertarget{item_8c_a8119a027cfc03c16ec13a37c4eca747a}{\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} {\bfseries tb\-\_\-item\-\_\-func\-\_\-size} ()}\label{item_8c_a8119a027cfc03c16ec13a37c4eca747a}

\item 
\hypertarget{item_8c_aa3e49b87cd9883fad233c197dbf2ee75}{\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} {\bfseries tb\-\_\-item\-\_\-func\-\_\-uint8} ()}\label{item_8c_aa3e49b87cd9883fad233c197dbf2ee75}

\item 
\hypertarget{item_8c_a9b9286791d78adbdd4c62bcc7fbad216}{\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} {\bfseries tb\-\_\-item\-\_\-func\-\_\-uint16} ()}\label{item_8c_a9b9286791d78adbdd4c62bcc7fbad216}

\item 
\hypertarget{item_8c_a0e0c6a48b92b91bf33a95ca420ea049e}{\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} {\bfseries tb\-\_\-item\-\_\-func\-\_\-uint32} ()}\label{item_8c_a0e0c6a48b92b91bf33a95ca420ea049e}

\item 
\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} \hyperlink{item_8c_a9f20ba2290975c2276a35e68ba956584}{tb\-\_\-item\-\_\-func\-\_\-str} (tb\-\_\-bool\-\_\-t bcase, tb\-\_\-handle\-\_\-t spool)
\item 
\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} \hyperlink{item_8c_a9c89393033940689fe2d47d6674df313}{tb\-\_\-item\-\_\-func\-\_\-ptr} (tb\-\_\-item\-\_\-func\-\_\-free\-\_\-t free, tb\-\_\-pointer\-\_\-t priv)
\item 
\hypertarget{item_8c_ada38a7c22a373b34a66e9c039c9035a3}{\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} {\bfseries tb\-\_\-item\-\_\-func\-\_\-obj} ()}\label{item_8c_ada38a7c22a373b34a66e9c039c9035a3}

\item 
\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} \hyperlink{item_8c_aee42cf7bf88ad2ec5cacd111e6090a6c}{tb\-\_\-item\-\_\-func\-\_\-efm} (tb\-\_\-size\-\_\-t size, tb\-\_\-handle\-\_\-t rpool)
\item 
\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} \hyperlink{item_8c_adf0de101907395a55a4d5eefd4af6801}{tb\-\_\-item\-\_\-func\-\_\-ifm} (tb\-\_\-size\-\_\-t size, tb\-\_\-item\-\_\-func\-\_\-free\-\_\-t free, tb\-\_\-pointer\-\_\-t priv)
\item 
\hyperlink{structtb__item__func__t}{tb\-\_\-item\-\_\-func\-\_\-t} \hyperlink{item_8c_a78f7378d7b5c11d3e1a47092439c254b}{tb\-\_\-item\-\_\-func\-\_\-scache} (tb\-\_\-bool\-\_\-t bcase)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
The Treasure Box Library

T\-Box is free software; you can redistribute it and/or modify it under the terms of the G\-N\-U Lesser General Public License as published by the Free Software Foundation; either version 2.\-1 of the License, or (at your option) any later version.

T\-Box is distributed in the hope that it will be useful, but W\-I\-T\-H\-O\-U\-T A\-N\-Y W\-A\-R\-R\-A\-N\-T\-Y; without even the implied warranty of M\-E\-R\-C\-H\-A\-N\-T\-A\-B\-I\-L\-I\-T\-Y or F\-I\-T\-N\-E\-S\-S F\-O\-R A P\-A\-R\-T\-I\-C\-U\-L\-A\-R P\-U\-R\-P\-O\-S\-E. See the G\-N\-U Lesser General Public License for more details.

You should have received a copy of the G\-N\-U Lesser General Public License along with T\-Box; If not, see \href{http://www.gnu.org/licenses/}{\tt http\-://www.\-gnu.\-org/licenses/}

Copyright (C) 2009 -\/ 2015, ruki All rights reserved.

\begin{DoxyAuthor}{Author}
ruki 
\end{DoxyAuthor}


Definition in file \hyperlink{item_8c_source}{item.\-c}.



\subsection{Function Documentation}
\hypertarget{item_8c_aee42cf7bf88ad2ec5cacd111e6090a6c}{\index{item.\-c@{item.\-c}!tb\-\_\-item\-\_\-func\-\_\-efm@{tb\-\_\-item\-\_\-func\-\_\-efm}}
\index{tb\-\_\-item\-\_\-func\-\_\-efm@{tb\-\_\-item\-\_\-func\-\_\-efm}!item.c@{item.\-c}}
\subsubsection[{tb\-\_\-item\-\_\-func\-\_\-efm}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-item\-\_\-func\-\_\-t} tb\-\_\-item\-\_\-func\-\_\-efm (
\begin{DoxyParamCaption}
\item[{tb\-\_\-size\-\_\-t}]{size, }
\item[{tb\-\_\-handle\-\_\-t}]{rpool}
\end{DoxyParamCaption}
)}}\label{item_8c_aee42cf7bf88ad2ec5cacd111e6090a6c}
the external fixed memory item function

storing the index value in the internal item of the container

using tb\-\_\-malloc if the rpool is null, using tb\-\_\-rpool\-\_\-malloc if the rpool exists


\begin{DoxyParams}{Parameters}
{\em size} & the item size \\
\hline
{\em rpool} & the item rpool\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the item func 
\end{DoxyReturn}


Definition at line 938 of file item.\-c.



References tb\-\_\-item\-\_\-func\-\_\-t\-::copy, tb\-\_\-item\-\_\-func\-\_\-t\-::dupl, tb\-\_\-item\-\_\-func\-\_\-t\-::hash, tb\-\_\-item\-\_\-func\-\_\-t\-::pool, tb\-\_\-item\-\_\-func\-\_\-t\-::priv, tb\-\_\-item\-\_\-func\-\_\-t\-::repl, tb\-\_\-item\-\_\-func\-\_\-t\-::size, T\-B\-\_\-\-I\-T\-E\-M\-\_\-\-T\-Y\-P\-E\-\_\-\-E\-F\-M, and tb\-\_\-item\-\_\-func\-\_\-t\-::type.

\hypertarget{item_8c_adf0de101907395a55a4d5eefd4af6801}{\index{item.\-c@{item.\-c}!tb\-\_\-item\-\_\-func\-\_\-ifm@{tb\-\_\-item\-\_\-func\-\_\-ifm}}
\index{tb\-\_\-item\-\_\-func\-\_\-ifm@{tb\-\_\-item\-\_\-func\-\_\-ifm}!item.c@{item.\-c}}
\subsubsection[{tb\-\_\-item\-\_\-func\-\_\-ifm}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-item\-\_\-func\-\_\-t} tb\-\_\-item\-\_\-func\-\_\-ifm (
\begin{DoxyParamCaption}
\item[{tb\-\_\-size\-\_\-t}]{size, }
\item[{tb\-\_\-item\-\_\-func\-\_\-free\-\_\-t}]{free, }
\item[{tb\-\_\-pointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{item_8c_adf0de101907395a55a4d5eefd4af6801}
the internal fixed memory item function

storing it in the internal item of the container directly for saving memory


\begin{DoxyParams}{Parameters}
{\em size} & the item size \\
\hline
{\em free} & the item free func \\
\hline
{\em priv} & the private data of the item free func\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the item func 
\end{DoxyReturn}


Definition at line 965 of file item.\-c.



References tb\-\_\-item\-\_\-func\-\_\-t\-::copy, tb\-\_\-item\-\_\-func\-\_\-t\-::dupl, tb\-\_\-item\-\_\-func\-\_\-t\-::hash, tb\-\_\-item\-\_\-func\-\_\-t\-::priv, tb\-\_\-item\-\_\-func\-\_\-t\-::repl, tb\-\_\-item\-\_\-func\-\_\-t\-::size, T\-B\-\_\-\-I\-T\-E\-M\-\_\-\-T\-Y\-P\-E\-\_\-\-I\-F\-M, and tb\-\_\-item\-\_\-func\-\_\-t\-::type.



Referenced by tb\-\_\-epool\-\_\-init().

\hypertarget{item_8c_a9c89393033940689fe2d47d6674df313}{\index{item.\-c@{item.\-c}!tb\-\_\-item\-\_\-func\-\_\-ptr@{tb\-\_\-item\-\_\-func\-\_\-ptr}}
\index{tb\-\_\-item\-\_\-func\-\_\-ptr@{tb\-\_\-item\-\_\-func\-\_\-ptr}!item.c@{item.\-c}}
\subsubsection[{tb\-\_\-item\-\_\-func\-\_\-ptr}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-item\-\_\-func\-\_\-t} tb\-\_\-item\-\_\-func\-\_\-ptr (
\begin{DoxyParamCaption}
\item[{tb\-\_\-item\-\_\-func\-\_\-free\-\_\-t}]{free, }
\item[{tb\-\_\-pointer\-\_\-t}]{priv}
\end{DoxyParamCaption}
)}}\label{item_8c_a9c89393033940689fe2d47d6674df313}
the pointer item function

\begin{DoxyNote}{Note}
if the free func have been hooked, the nfree need hook too.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em free} & the item free func \\
\hline
{\em priv} & the private data of the item free func\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the item func 
\end{DoxyReturn}


Definition at line 887 of file item.\-c.



References tb\-\_\-item\-\_\-func\-\_\-t\-::copy, tb\-\_\-item\-\_\-func\-\_\-t\-::dupl, tb\-\_\-item\-\_\-func\-\_\-t\-::hash, tb\-\_\-item\-\_\-func\-\_\-t\-::priv, tb\-\_\-item\-\_\-func\-\_\-t\-::repl, tb\-\_\-item\-\_\-func\-\_\-t\-::size, T\-B\-\_\-\-I\-T\-E\-M\-\_\-\-T\-Y\-P\-E\-\_\-\-P\-T\-R, and tb\-\_\-item\-\_\-func\-\_\-t\-::type.



Referenced by tb\-\_\-ltimer\-\_\-init(), tb\-\_\-mstream\-\_\-done(), tb\-\_\-mstream\-\_\-init(), tb\-\_\-mstream\-\_\-kill(), and tb\-\_\-timer\-\_\-init().

\hypertarget{item_8c_a78f7378d7b5c11d3e1a47092439c254b}{\index{item.\-c@{item.\-c}!tb\-\_\-item\-\_\-func\-\_\-scache@{tb\-\_\-item\-\_\-func\-\_\-scache}}
\index{tb\-\_\-item\-\_\-func\-\_\-scache@{tb\-\_\-item\-\_\-func\-\_\-scache}!item.c@{item.\-c}}
\subsubsection[{tb\-\_\-item\-\_\-func\-\_\-scache}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-item\-\_\-func\-\_\-t} tb\-\_\-item\-\_\-func\-\_\-scache (
\begin{DoxyParamCaption}
\item[{tb\-\_\-bool\-\_\-t}]{bcase}
\end{DoxyParamCaption}
)}}\label{item_8c_a78f7378d7b5c11d3e1a47092439c254b}
the string item function for scache


\begin{DoxyParams}{Parameters}
{\em bcase} & is case?\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the item func 
\end{DoxyReturn}


Definition at line 991 of file item.\-c.



References tb\-\_\-item\-\_\-func\-\_\-t\-::copy, tb\-\_\-item\-\_\-func\-\_\-t\-::dupl, tb\-\_\-item\-\_\-func\-\_\-t\-::hash, tb\-\_\-item\-\_\-func\-\_\-t\-::priv, tb\-\_\-item\-\_\-func\-\_\-t\-::repl, tb\-\_\-item\-\_\-func\-\_\-t\-::size, T\-B\-\_\-\-I\-T\-E\-M\-\_\-\-T\-Y\-P\-E\-\_\-\-S\-C\-A\-C\-H\-E, and tb\-\_\-item\-\_\-func\-\_\-t\-::type.



Referenced by tb\-\_\-dictionary\-\_\-init().

\hypertarget{item_8c_a9f20ba2290975c2276a35e68ba956584}{\index{item.\-c@{item.\-c}!tb\-\_\-item\-\_\-func\-\_\-str@{tb\-\_\-item\-\_\-func\-\_\-str}}
\index{tb\-\_\-item\-\_\-func\-\_\-str@{tb\-\_\-item\-\_\-func\-\_\-str}!item.c@{item.\-c}}
\subsubsection[{tb\-\_\-item\-\_\-func\-\_\-str}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-item\-\_\-func\-\_\-t} tb\-\_\-item\-\_\-func\-\_\-str (
\begin{DoxyParamCaption}
\item[{tb\-\_\-bool\-\_\-t}]{bcase, }
\item[{tb\-\_\-handle\-\_\-t}]{spool}
\end{DoxyParamCaption}
)}}\label{item_8c_a9f20ba2290975c2276a35e68ba956584}
the string item function

using tb\-\_\-strdup if the spool is null, using tb\-\_\-spool\-\_\-strdup if the spool exists


\begin{DoxyParams}{Parameters}
{\em bcase} & is case? \\
\hline
{\em spool} & the string pool\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the item func 
\end{DoxyReturn}


Definition at line 861 of file item.\-c.



References tb\-\_\-item\-\_\-func\-\_\-t\-::copy, tb\-\_\-item\-\_\-func\-\_\-t\-::dupl, tb\-\_\-item\-\_\-func\-\_\-t\-::hash, tb\-\_\-item\-\_\-func\-\_\-t\-::pool, tb\-\_\-item\-\_\-func\-\_\-t\-::priv, tb\-\_\-item\-\_\-func\-\_\-t\-::repl, tb\-\_\-item\-\_\-func\-\_\-t\-::size, T\-B\-\_\-\-I\-T\-E\-M\-\_\-\-T\-Y\-P\-E\-\_\-\-S\-T\-R, and tb\-\_\-item\-\_\-func\-\_\-t\-::type.



Referenced by tb\-\_\-scache\-\_\-init().

