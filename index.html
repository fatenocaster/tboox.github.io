<!DOCTYPE html>
<html>

  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>TBOOX</title>
	<meta name="description" content="Welcome to the website for the TBOOX Open Source Project!">
	
	<link rel="canonical" href="http://tboox.org/">
	<link rel="alternate" type="application/rss+xml" title="TBOOX" href="http://tboox.org/feed.xml" />
    <link rel="stylesheet" type="text/css" href="/static/css/all.css">
	<script type="text/javascript" src="/static/js/all.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>

    <script>
    var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="//hm.baidu.com/hm.js?162f1cd478898a0686b0b5d5115e2af2";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)})();
    </script>
</head>


 <!--  <body data-spy="scroll" data-target="#myAffix"> -->
  <body>

    <header>

  <nav class="navbar navbar-inverse">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">TBOOX</a>
      <p class="navbar-text"></p>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
<li>

<a href="/">Home</a></li>




<li><a href="/blog/"><span class="glyphicon "></span> Blog</a></li>





<li><a href="/documents/"><span class="glyphicon "></span> Documents</a></li>





<li><a href="/downloads/"><span class="glyphicon "></span> Downloads</a></li>





<li><a href="/donation/"><span class="glyphicon "></span> Donation</a></li>





<li><a href="/about/"><span class="glyphicon "></span> About</a></li>












      </ul>
    </div>
  </div>
</nav>

</header>


    <div id="main" class="container main">
      <div class="row">
  <div id="myArticle" class="col-sm-9">
    <div class="post-area post">
      <article>
        <h3 id="languages">Languages</h3>

<ul>
  <li><a href="/cn">中文</a></li>
</ul>

<h1 id="the-tboox-open-source-projects">The TBOOX Open Source Projects</h1>

<ul>
  <li><a href="#tbox">TBOX</a>: The Treasure Box Library</li>
  <li><a href="#gbox">GBOX</a>: The Graphic Box Library</li>
  <li><a href="#xmake">XMake</a>: The Automatic Cross-platform Build Tool</li>
</ul>

<div id="tbox"></div>

<h1 id="the-treasure-box-library-tbox">The Treasure Box Library (TBOX)</h1>

<h2 id="introduction">Introduction</h2>

<p>TBOX is a glib-like cross-platform C library that is simple to use yet powerful in nature.</p>

<p>The project focuses on making C development easier and provides many modules (.e.g stream, asio, regex, container, algorithm …), 
so that any developer can quickly pick it up and enjoy the productivity boost when developing in C language.</p>

<p>Supports the following platforms:</p>

<ul>
  <li>Windows</li>
  <li>Macosx</li>
  <li>Linux</li>
  <li>Android</li>
  <li>iOS</li>
</ul>

<p>If you want to know more, please refer to:</p>

<ul>
  <li><a href="https://github.com/waruqi/tbox/wiki/documents">Documents</a></li>
  <li><a href="https://github.com/waruqi/tbox">Github</a></li>
</ul>

<h2 id="features">Features</h2>

<h4 id="the-stream-library">The stream library</h4>
<ul>
  <li>Supports file, data, http and socket source</li>
  <li>Supports the stream filter for gzip, charset and…</li>
  <li>Implements transfer for two stream</li>
  <li>Implements transfer pool (asio) for multi-stream</li>
  <li>Implements the static buffer stream for parsing data</li>
</ul>

<h4 id="the-asynchronous-io-library">The asynchronous io library</h4>
<ul>
  <li>Supports reactor and proactor mode</li>
  <li>Uses epoll, poll, select, kqueue and iocp os system api</li>
</ul>

<h4 id="the-database-library">The database library</h4>
<ul>
  <li>Supports mysql and sqlite3 database and enumerates data using the iterator mode</li>
</ul>

<h4 id="the-xml-parser-library">The xml parser library</h4>
<ul>
  <li>Supports DOM and SAX mode and Supports xpath</li>
</ul>

<h4 id="the-serialization-and-deserialization-library">The serialization and deserialization library.</h4>
<ul>
  <li>Supports xml, json, bplist, xplist, binary formats</li>
</ul>

<h4 id="the-memory-library">The memory library</h4>
<ul>
  <li>Implements some memory pools for optimizing memory</li>
  <li>Supports fast memory error detecting. it can detect the following types of bugs for the debug mode:
    <ul>
      <li>out-of-bounds accesses to heap and globals</li>
      <li>use-after-free</li>
      <li>double-free, invalid free</li>
      <li>memory leaks</li>
    </ul>
  </li>
</ul>

<h4 id="the-container-library">The container library</h4>
<ul>
  <li>Implements hash table, single list, double list, vector, stack, queue
and min/max heap. Supports iterator mode for algorithm</li>
</ul>

<h4 id="the-algorithm-library">The algorithm library</h4>
<ul>
  <li>Uses the iterator mode</li>
  <li>Implements find, binary find and reverse find algorithm</li>
  <li>Implements sort, bubble sort, quick sort, heap sort and insert sort algorithm</li>
  <li>Implements count, walk items, reverse walk items, for_all and rfor_all</li>
</ul>

<h4 id="the-network-library">The network library</h4>
<ul>
  <li>Implements dns(cached), ssl(openssl and polarssl), http and cookies</li>
  <li>Supports asynchronous io mode for dns, ssl and http using the asio and stream library</li>
</ul>

<h4 id="the-platform-library">The platform library</h4>
<ul>
  <li>Implements timer, fast and low precision timer</li>
  <li>Implements atomic and atomic64 operation</li>
  <li>Implements spinlock, mutex, event, semaphore, thread and thread pool</li>
  <li>Implements file, socket operation</li>
</ul>

<h4 id="the-charset-library">The charset library</h4>
<ul>
  <li>Supports utf8, utf16, gbk, gb2312, uc2 and uc4</li>
  <li>Supports big endian and little endian mode</li>
</ul>

<h4 id="the-zip-library">The zip library</h4>
<ul>
  <li>Supports gzip, zlibraw, zlib formats using the zlib library if exists</li>
  <li>Implements lzsw, lz77 and rlc algorithm</li>
</ul>

<h4 id="the-utils-library">The utils library</h4>
<ul>
  <li>Implements base32, base64 encoder and decoder</li>
  <li>Implements crc32, adler32, md5 and sha1 hash algorithm</li>
  <li>Implements assert and trace output for the debug mode</li>
  <li>Implements bits operation for parsing u8, u16, u32, u64 data</li>
</ul>

<h4 id="the-math-library">The math library</h4>
<ul>
  <li>Implements random generator</li>
  <li>Implements fast fixed-point calculation, Supports 6-bits, 16-bits, 30-bits fixed-point number</li>
</ul>

<h4 id="the-libc-library">The libc library</h4>
<ul>
  <li>Implements lightweight libc library interfaces, the interface name contains <code class="highlighter-rouge">tb_xxx</code> prefix for avoiding conflict</li>
  <li>Implements strixxx strrxxx wcsixxx wcsrxxx interface extension</li>
  <li>optimizes some frequently-used interface, .e.g. memset, memcpy, strcpy …</li>
  <li>Implements <code class="highlighter-rouge">memset_u16</code>, <code class="highlighter-rouge">memset_u32</code>, <code class="highlighter-rouge">memset_u64</code> extension interfaces</li>
</ul>

<h4 id="the-libm-library">The libm library</h4>
<ul>
  <li>Implements lightweight libm library interfaces, the interface name contains <code class="highlighter-rouge">tb_xxx</code> prefix for avoiding conflict</li>
  <li>Supports float and double type</li>
</ul>

<h4 id="the-regex-library">The regex library</h4>
<ul>
  <li>Supports match and replace</li>
  <li>Supports global/multiline/caseless mode</li>
  <li>uses pcre, pcre2 and posix regex modules</li>
</ul>

<h2 id="in-the-plans">In the Plans</h2>
<ul>
  <li>Add coroutine module</li>
  <li>Add server module</li>
  <li>Reconstruction xml module</li>
  <li>Add more algorithms and container</li>
  <li>Optimizes more libc interfaces</li>
  <li>Implements more libm interfaces and not wrap it only</li>
</ul>

<h2 id="projects">Projects</h2>

<p>Some projects using tbox:</p>

<ul>
  <li><a href="https://github.com/waruqi/gbox">gbox</a></li>
  <li><a href="https://github.com/waruqi/itrace">itrace</a></li>
  <li><a href="https://github.com/waruqi/tbox/wiki/tbox-projects">more</a></li>
</ul>

<h2 id="build">Build</h2>

<p>Please install xmake first: <a href="https://github.com/waruqi/xmake">xmake</a></p>

<div class="highlighter-rouge"><pre class="highlight"><code># build for the host platform
cd ./tbox
xmake

# build for the mingw platform
cd ./tbox
xmake f -p mingw --sdk=/home/mingwsdk 
xmake

# build for the iphoneos platform
cd ./tbox
xmake f -p iphoneos 
xmake

# build for the android platform
cd ./tbox
xmake f -p android --ndk=xxxxx
xmake

# build for the linux cross-platform
cd ./tbox
xmake f -p linux --sdk=/home/sdk # --toolchains=/home/sdk/bin
xmake
</code></pre>
</div>

<h2 id="example">Example</h2>

<div class="highlighter-rouge"><pre class="highlight"><code>#include "tbox/tbox.h"

int main(int argc, char** argv)
{
    // init tbox
    if (!tb_init(tb_null, tb_null)) return 0;

    // trace
    tb_trace_i("hello tbox");

    // init vector
    tb_vector_ref_t vector = tb_vector_init(0, tb_element_cstr(tb_true));
    if (vector)
    {
        // insert item
        tb_vector_insert_tail(vector, "hello");
        tb_vector_insert_tail(vector, "tbox");

        // dump all items
        tb_for_all (tb_char_t const*, cstr, vector)
        {
            // trace
            tb_trace_i("%s", cstr);
        }

        // exit vector
        tb_vector_exit(vector);
    }

    // init stream
    tb_stream_ref_t stream = tb_stream_init_from_url("http://www.xxx.com/file.txt");
    if (stream)
    {
        // open stream
        if (tb_stream_open(stream))
        {
            // read line
            tb_long_t size = 0;
            tb_char_t line[TB_STREAM_BLOCK_MAXN];
            while ((size = tb_stream_bread_line(stream, line, sizeof(line))) &gt;= 0)
            {
                // trace
                tb_trace_i("line: %s", line);
            }
        }

        // exit stream
        tb_stream_exit(stream);
    }

    // wait some time
    getchar();

    // exit tbox
    tb_exit();
    return 0;
}
</code></pre>
</div>

<div id="gbox"></div>

<h1 id="the-graphic-box-library-gbox">The Graphic Box Library (GBOX)</h1>

<h2 id="introduction-1">Introduction</h2>

<p>GBOX is a mutli-platform c graphic library.</p>

<p>It is now in the early stages of development only for reference and learning.</p>

<p>If you are interesting to this project, please view the source code.</p>

<ul>
  <li><a href="https://github.com/waruqi/gbox">Github</a></li>
</ul>

<div id="xmake"></div>

<h1 id="the-automatic-cross-platform-build-tool-xmake">The Automatic Cross-platform Build Tool (XMake)</h1>

<h2 id="introduction-2">Introduction</h2>

<p>xmake is a make-like build utility based on lua.</p>

<p>The project focuses on making development and building easier and provides many features (.e.g package, install, plugin, macro, action, option, task …), 
so that any developer can quickly pick it up and enjoy the productivity boost when developing and building project.</p>

<h4 id="features-1">Features</h4>

<ul>
  <li>Create projects and supports many project templates</li>
  <li>Support c/c++, objc/c++, swift and assembly language</li>
  <li>Automatically probe the host environment and configure project</li>
  <li>Provide some built-in actions (config, build, package, clean, install, uninstall and run)</li>
  <li>Provide some built-in plugins (doxygen, macro, project)</li>
  <li>Provide some built-in macros (batch packaging)</li>
  <li>Describe the project file using lua script, more flexible and simple</li>
  <li>Custom packages, platforms, plugins, templates, tasks, macros, options and actions</li>
  <li>Do not generate makefile and build project directly</li>
  <li>Support multitasking with argument: -j</li>
</ul>

<h4 id="actions">Actions</h4>

<ul>
  <li>config: Configure project before building.</li>
  <li>global: Configure the global options for xmake.</li>
  <li>build: Build project.</li>
  <li>clean: Remove all binary and temporary files.</li>
  <li>create: Create a new project using template.</li>
  <li>package: Package the given target</li>
  <li>install: Install the project binary files.</li>
  <li>uninstall: Uninstall the project binary files.</li>
  <li>run: Run the project target.</li>
</ul>

<h4 id="plugins">Plugins</h4>

<ul>
  <li>The doxygen plugin: Make doxygen document from source codes</li>
  <li>The macro plugin: Record and playback commands</li>
  <li>The hello plugin: A simple plugin demo to show ‘hello xmake!’</li>
  <li>The project plugin: Create the project file for IDE (.e.g makefile and vs, xcode in the feature …)</li>
</ul>

<h4 id="languages-1">Languages</h4>

<ul>
  <li>C/C++</li>
  <li>Objc/Objc++</li>
  <li>Swift</li>
  <li>Assembly</li>
</ul>

<h4 id="platforms">Platforms</h4>

<ul>
  <li>Windows (x86, x64, amd64, x86_amd64)</li>
  <li>Macosx (i386, x86_64)</li>
  <li>Linux (i386, x86_64, cross-toolchains …)</li>
  <li>Android (armv5te, armv6, armv7-a, armv8-a, arm64-v8a)</li>
  <li>iPhoneos (armv7, armv7s, arm64, i386, x86_64)</li>
  <li>Watchos (armv7k, i386)</li>
  <li>Mingw (i386, x86_64)</li>
</ul>

<h4 id="in-the-plans-1">In the plans</h4>

<ul>
  <li>Manage package and dependence</li>
  <li>Download package automaticlly</li>
  <li>Create package repository for porting other third-party source codes, it’s goal is that one people port it and many people shared.</li>
  <li>Implement more plugins</li>
  <li>Create more project file for IDE (.e.g vs, xcode ..)</li>
</ul>

<h4 id="examples">Examples</h4>

<p>Create a c++ console project:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>    xmake create -l c++ -t 1 console
 or xmake create --language=c++ --template=1 console
</code></pre>
</div>

<p>Project xmakefile: xmake.lua</p>

<div class="highlighter-rouge"><pre class="highlight"><code>target("console")
    set_kind("binary")
    add_files("src/*.c") 
</code></pre>
</div>

<p>Configure project:</p>

<p>This is optional, if you compile the targets only for linux, macosx and windows and the default compilation mode is release.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   xmake f -p iphoneos -m debug
or xmake f --plat=macosx --arch=x86_64
or xmake f -p windows
or xmake config --plat=iphoneos --mode=debug
or xmake config --plat=android --arch=armv7-a --ndk=xxxxx
or xmake config -p linux -a i386
or xmake config -p mingw --cross=i386-mingw32- --toolchains=/xxx/bin
or xmake config -p mingw --sdk=/mingwsdk
or xmake config --help
</code></pre>
</div>

<p>Compile project：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   xmake
or xmake -r
or xmake --rebuild
</code></pre>
</div>

<p>Run target：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   xmake r console
or xmake run console
</code></pre>
</div>

<p>Package all：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   xmake p
or xmake package
or xmake package console
or xmake package -o /tmp
or xmake package --output=/tmp
</code></pre>
</div>

<p>Package all archs using macro:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   xmake m package 
or xmake m package -p iphoneos
or xmake m package -p macosx -f "-m debug" -o /tmp/
or xmake m package --help
</code></pre>
</div>

<p>Install targets：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   xmake i
or xmake install
or xmake install console
or xmake install -o /tmp
or xmake install --output=/tmp
</code></pre>
</div>

<p>If you need known more detailed usage，please refer to <a href="https://github.com/waruqi/xmake/wiki/documents">documents</a>
or run:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>   xmake -h
or xmake --help
or xmake config --help
or xmake package --help
or xmake macro --help
...
</code></pre>
</div>

<p>The simple xmake.lua file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>-- the debug mode
if is_mode("debug") then
    
    -- enable the debug symbols
    set_symbols("debug")

    -- disable optimization
    set_optimize("none")
end

-- the release mode
if is_mode("release") then

    -- set the symbols visibility: hidden
    set_symbols("hidden")

    -- enable fastest optimization
    set_optimize("fastest")

    -- strip all symbols
    set_strip("all")
end

-- add target
target("test")

    -- set kind
    set_kind("static")

    -- add files
    add_files("src/*.c") 
</code></pre>
</div>


      </article>
      <hr>
    </div>
	    

  </div>
  <div id="content" class="col-sm-3">
    <!-- <div id="myAffix" class="shadow-bottom-center hidden-xs" data-spy="affix" data-offset-top="0" data-offset-bottom="-20"> -->
    <div id="myAffix" class="shadow-bottom-center hidden-xs" >
      <div class="categories-list-header">
        Content
      </div>
      <div class="content-text"></div>
    </div>
  </div>
</div>

    </div>

    
    <div id="top" data-toggle="tooltip" data-placement="left" title="back to top">
      <a href="javascript:;">
        <div class="arrow"></div>
        <div class="stick"></div>
      </a>
    </div>

    <footer class="">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <a href="mailto:waruqi@gmail.com"><span class="glyphicon glyphicon-envelope"></span> waruqi@gmail.com</a>
        <span class="point"></span>
          
          <a href="https://github.com/waruqi">
            <span class="icon">
              <svg viewBox="0 0 16 16">
                <path fill="#aaa" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            Github
            <!-- <span>waruqi</span> -->
          </a>
          
          <span class="point"></span>
          
            <a href="https://twitter.com/waruqi">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>
              Twitter
              <!-- <span>waruqi</span> -->
            </a>
          
          <span class="point"></span>
          <span><a href="/feed.xml">RSS</a></span>
          <span class="point"></span>
          <span>&copy; 2016 TBOOX</span>
      </div>
    </div>
  </div>
</footer>


    <script type="text/javascript">
    function OnClickNewPost()
    {
        var title = prompt("Please enter title of your post");
        if (title!=null){
            title = title.replace(" ", "-");
            var currentdate = new Date();
            var urlNewPage = "?filename=_posts/" 
                + currentdate.getFullYear() + "-" + (currentdate.getMonth()+1) + "-" + currentdate.getDate() + "-" + title + ".md";
                
            var defaultText =  [
                '---',
                'layout: post',
                'comments: true',
                'categories: diary',
                '---',
                '## Title',
                'text'
                ].join('\n');
            urlNewPage += "&value=" + encodeURIComponent(defaultText);
            window.open(urlNewPage);
        }
    }
    
    $(function() {
      // CreateNewPostLinks
      $('.newpost').each(function(){
          $(this).click(OnClickNewPost);
      });
    });
</script>
  
  </body>
</html>
